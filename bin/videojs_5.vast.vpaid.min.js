(function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var u=typeof require=="function"&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}var a=typeof require=="function"&&require;for(var s=0;s<i.length;s++)r(i[s]);return r})({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=n.IVPAIDAdUnit=function(){function t(){r(this,t)}i(t,[{key:"handshakeVersion",value:function e(){var t=arguments.length<=0||arguments[0]===undefined?"2.0":arguments[0];var e=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1]}},{key:"initAd",value:function n(t,e,i,r){var a=arguments.length<=4||arguments[4]===undefined?{AdParameters:""}:arguments[4];var s=arguments.length<=5||arguments[5]===undefined?{flashVars:""}:arguments[5];var o=arguments.length<=6||arguments[6]===undefined?undefined:arguments[6]}},{key:"resizeAd",value:function a(t,e,n){var i=arguments.length<=3||arguments[3]===undefined?undefined:arguments[3]}},{key:"startAd",value:function s(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"stopAd",value:function o(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"pauseAd",value:function u(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"resumeAd",value:function l(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"expandAd",value:function c(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"collapseAd",value:function d(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"skipAd",value:function f(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0]}},{key:"getAdLinear",value:function h(t){}},{key:"getAdWidth",value:function p(t){}},{key:"getAdHeight",value:function v(t){}},{key:"getAdExpanded",value:function g(t){}},{key:"getAdSkippableState",value:function m(t){}},{key:"getAdRemainingTime",value:function y(t){}},{key:"getAdDuration",value:function A(t){}},{key:"setAdVolume",value:function _(t){var e=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1]}},{key:"getAdVolume",value:function k(t){}},{key:"getAdCompanions",value:function E(t){}},{key:"getAdIcons",value:function T(t){}}]);return t}();Object.defineProperty(a,"EVENTS",{writable:false,configurable:false,value:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]})},{}],2:[function(t,e,n){"use strict";var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:true});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&((typeof e==="undefined"?"undefined":i(e))==="object"||typeof e==="function")?e:t}function o(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":i(e)))}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var u=t("./IVPAIDAdUnit").IVPAIDAdUnit;var l=Object.getOwnPropertyNames(u.prototype).filter(function(t){return["constructor"].indexOf(t)===-1});var c=n.VPAIDAdUnit=function(t){o(e,t);function e(t){a(this,e);var n=s(this,Object.getPrototypeOf(e).call(this));n._destroyed=false;n._flash=t;return n}r(e,[{key:"_destroy",value:function n(){var t=this;this._destroyed=true;l.forEach(function(e){t._flash.removeCallbackByMethodName(e)});u.EVENTS.forEach(function(e){t._flash.offEvent(e)});this._flash=null}},{key:"isDestroyed",value:function i(){return this._destroyed}},{key:"on",value:function c(t,e){this._flash.on(t,e)}},{key:"off",value:function d(t,e){this._flash.off(t,e)}},{key:"handshakeVersion",value:function f(){var t=arguments.length<=0||arguments[0]===undefined?"2.0":arguments[0];var e=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1];this._flash.callFlashMethod("handshakeVersion",[t],e)}},{key:"initAd",value:function h(t,e,n,i){var r=arguments.length<=4||arguments[4]===undefined?{AdParameters:""}:arguments[4];var a=arguments.length<=5||arguments[5]===undefined?{flashVars:""}:arguments[5];var s=arguments.length<=6||arguments[6]===undefined?undefined:arguments[6];this._flash.setSize(t,e);r=r||{AdParameters:""};a=a||{flashVars:""};this._flash.callFlashMethod("initAd",[this._flash.getWidth(),this._flash.getHeight(),n,i,r.AdParameters||"",a.flashVars||""],s)}},{key:"resizeAd",value:function p(t,e,n){var i=arguments.length<=3||arguments[3]===undefined?undefined:arguments[3];this._flash.setSize(t,e);this._flash.callFlashMethod("resizeAd",[this._flash.getWidth(),this._flash.getHeight(),n],i)}},{key:"startAd",value:function v(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("startAd",[],t)}},{key:"stopAd",value:function g(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("stopAd",[],t)}},{key:"pauseAd",value:function m(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("pauseAd",[],t)}},{key:"resumeAd",value:function y(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("resumeAd",[],t)}},{key:"expandAd",value:function A(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("expandAd",[],t)}},{key:"collapseAd",value:function _(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("collapseAd",[],t)}},{key:"skipAd",value:function k(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];this._flash.callFlashMethod("skipAd",[],t)}},{key:"getAdLinear",value:function E(t){this._flash.callFlashMethod("getAdLinear",[],t)}},{key:"getAdWidth",value:function T(t){this._flash.callFlashMethod("getAdWidth",[],t)}},{key:"getAdHeight",value:function w(t){this._flash.callFlashMethod("getAdHeight",[],t)}},{key:"getAdExpanded",value:function b(t){this._flash.callFlashMethod("getAdExpanded",[],t)}},{key:"getAdSkippableState",value:function S(t){this._flash.callFlashMethod("getAdSkippableState",[],t)}},{key:"getAdRemainingTime",value:function V(t){this._flash.callFlashMethod("getAdRemainingTime",[],t)}},{key:"getAdDuration",value:function C(t){this._flash.callFlashMethod("getAdDuration",[],t)}},{key:"setAdVolume",value:function I(t){var e=arguments.length<=1||arguments[1]===undefined?undefined:arguments[1];this._flash.callFlashMethod("setAdVolume",[t],e)}},{key:"getAdVolume",value:function F(t){this._flash.callFlashMethod("getAdVolume",[],t)}},{key:"getAdCompanions",value:function L(t){this._flash.callFlashMethod("getAdCompanions",[],t)}},{key:"getAdIcons",value:function U(t){this._flash.callFlashMethod("getAdIcons",[],t)}}]);return e}(u)},{"./IVPAIDAdUnit":1}],3:[function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=t("./jsFlashBridge").JSFlashBridge;var s=t("./VPAIDAdUnit").VPAIDAdUnit;var o=t("./utils").noop;var u=t("./utils").callbackTimeout;var l=t("./utils").isPositiveInt;var c=t("./utils").createElementWithID;var d=t("./utils").unique("vpaid");var f=t("./flashTester.js").createFlashTester;var h="error";var p="10.1.0";var v={isSupported:function _(){return true}};var g=function(){function t(e,n){var i=arguments.length<=2||arguments[2]===undefined?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[2];var s=this;var f=arguments.length<=3||arguments[3]===undefined?{wmode:"transparent",salign:"tl",align:"left",allowScriptAccess:"always",scale:"noScale",allowFullScreen:"true",quality:"high"}:arguments[3];var h=arguments.length<=4||arguments[4]===undefined?{debug:false,timeout:1e4}:arguments[4];r(this,t);if(!t.hasExternalDependencies()){return g("no swfobject in global scope. check: https://github.com/swfobject/swfobject or https://code.google.com/p/swfobject/")}this._vpaidParentEl=e;this._flashID=d();this._destroyed=false;n=n||o;i.width=l(i.width,800);i.height=l(i.height,400);c(e,this._flashID,true);f.movie=i.data;f.FlashVars="flashid="+this._flashID+"&handler="+a.VPAID_FLASH_HANDLER+"&debug="+h.debug+"&salign="+f.salign;if(!t.isSupported()){return g("user don't support flash or doesn't have the minimum required version of flash "+p)}this.el=swfobject.createSWF(i,f,this._flashID);if(!this.el){return g("swfobject failed to create object in element")}var v=u(h.timeout,function(t,e){y.call(s);n(t,e)},function(){n("vpaid flash load timeout "+h.timeout)});this._flash=new a(this.el,i.data,this._flashID,i.width,i.height,v);function g(t){setTimeout(function(){n(new Error(t))},0);return this}}i(t,[{key:"destroy",value:function e(){this._destroyAdUnit();if(this._flash){this._flash.destroy();this._flash=null}this.el=null;this._destroyed=true}},{key:"isDestroyed",value:function n(){return this._destroyed}},{key:"_destroyAdUnit",value:function f(){delete this._loadLater;if(this._adUnitLoad){this._adUnitLoad=null;this._flash.removeCallback(this._adUnitLoad)}if(this._adUnit){this._adUnit._destroy();this._adUnit=null}}},{key:"loadAdUnit",value:function h(t,e){var n=this;m.call(this);if(this._adUnit){this._destroyAdUnit()}if(this._flash.isReady()){this._adUnitLoad=function(t,i){if(!t){n._adUnit=new s(n._flash)}n._adUnitLoad=null;e(t,n._adUnit)};this._flash.callFlashMethod("loadAdUnit",[t],this._adUnitLoad)}else{this._loadLater={url:t,callback:e}}}},{key:"unloadAdUnit",value:function v(){var t=arguments.length<=0||arguments[0]===undefined?undefined:arguments[0];m.call(this);this._destroyAdUnit();this._flash.callFlashMethod("unloadAdUnit",[],t)}},{key:"getFlashID",value:function g(){m.call(this);return this._flash.getFlashID()}},{key:"getFlashURL",value:function A(){m.call(this);return this._flash.getFlashURL()}}]);return t}();A("isSupported",function(){return g.hasExternalDependencies()&&swfobject.hasFlashPlayerVersion(p)&&v.isSupported()},true);A("hasExternalDependencies",function(){return!!window.swfobject});A("runFlashTest",function(t){v=f(document.body,t)});function m(){if(this._destroyed){throw new Error("VPAIDFlashToJS is destroyed!")}}function y(){if(this._loadLater){this.loadAdUnit(this._loadLater.url,this._loadLater.callback);delete this._loadLater}}function A(t,e){var n=arguments.length<=2||arguments[2]===undefined?false:arguments[2];Object.defineProperty(g,t,{writable:n,configurable:false,value:e})}e.exports=g},{"./VPAIDAdUnit":2,"./flashTester.js":4,"./jsFlashBridge":5,"./utils":8}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a="vpaid_video_flash_tester";var s="vpaid_video_flash_tester_el";var o=t("./jsFlashBridge").JSFlashBridge;var u=t("./utils");var l=t("./registry").MultipleValuesRegistry;var c=function(){function t(e){var n=this;var i=arguments.length<=1||arguments[1]===undefined?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[1];r(this,t);this.parentEl=u.createElementWithID(e,s);u.hideFlashEl(this.parentEl);var a={};a.movie=i.data;a.FlashVars="flashid="+s+"&handler="+o.VPAID_FLASH_HANDLER;this.el=swfobject.createSWF(i,a,s);this._handlers=new l;this._isSupported=false;if(this.el){u.hideFlashEl(this.el);this._flash=new o(this.el,i.data,s,400,400,function(){var t=true;n._isSupported=t;n._handlers.get("change").forEach(function(e){setTimeout(function(){e("change",t)},0)})})}}i(t,[{key:"isSupported",value:function e(){return this._isSupported}},{key:"on",value:function n(t,e){this._handlers.add(t,e)}}]);return t}();var d=n.createFlashTester=function f(t,e){if(!window[a]){window[a]=new c(t,e)}return window[a]}},{"./jsFlashBridge":5,"./registry":7,"./utils":8}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=t("./utils").unique;var s=t("./utils").isPositiveInt;var o=t("./utils").stringEndsWith;var u=t("./registry").SingleValueRegistry;var l=t("./registry").MultipleValuesRegistry;var c=t("./jsFlashBridgeRegistry");var d="vpaid_video_flash_handler";var f="AdError";var h=n.JSFlashBridge=function(){function t(e,n,i,s,o,d){r(this,t);this._el=e;this._flashID=i;this._flashURL=n;this._width=s;this._height=o;this._handlers=new l;this._callbacks=new u;this._uniqueMethodIdentifier=a(this._flashID);this._ready=false;this._handShakeHandler=d;c.addInstance(this._flashID,this)}i(t,[{key:"on",value:function e(t,n){this._handlers.add(t,n)}},{key:"off",value:function n(t,e){return this._handlers.remove(t,e)}},{key:"offEvent",value:function d(t){return this._handlers.removeByKey(t)}},{key:"offAll",value:function h(){return this._handlers.removeAll()}},{key:"callFlashMethod",value:function v(t){var e=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];var n=arguments.length<=2||arguments[2]===undefined?undefined:arguments[2];var i="";if(n){i=this._uniqueMethodIdentifier()+"_"+t;this._callbacks.add(i,n)}try{this._el[t]([i].concat(e))}catch(r){if(n){p.call(this,i,r)}else{this._trigger(f,r)}}}},{key:"removeCallback",value:function g(t){return this._callbacks.removeByValue(t)}},{key:"removeCallbackByMethodName",value:function m(t){var e=this;this._callbacks.filterKeys(function(e){return o(e,t)}).forEach(function(t){e._callbacks.remove(t)})}},{key:"removeAllCallbacks",value:function y(){return this._callbacks.removeAll()}},{key:"_trigger",value:function A(t,e){var n=this;this._handlers.get(t).forEach(function(i){if(t==="AdClickThru"){i(e)}else{setTimeout(function(){if(n._handlers.get(t).length>0){i(e)}},0)}})}},{key:"_callCallback",value:function _(t,e,n,i){var r=this._callbacks.get(e);if(!r){if(n&&e===""){this.trigger(f,n)}return}p.call(this,e,n,i)}},{key:"_handShake",value:function k(t,e){this._ready=true;if(this._handShakeHandler){this._handShakeHandler(t,e);delete this._handShakeHandler}}},{key:"getSize",value:function E(){return{width:this._width,height:this._height}}},{key:"setSize",value:function T(t,e){this._width=s(t,this._width);this._height=s(e,this._height);this._el.setAttribute("width",this._width);this._el.setAttribute("height",this._height)}},{key:"getWidth",value:function w(){return this._width}},{key:"setWidth",value:function b(t){this.setSize(t,this._height)}},{key:"getHeight",value:function S(){return this._height}},{key:"setHeight",value:function V(t){this.setSize(this._width,t)}},{key:"getFlashID",value:function C(){return this._flashID}},{key:"getFlashURL",value:function I(){return this._flashURL}},{key:"isReady",value:function F(){return this._ready}},{key:"destroy",value:function L(){this.offAll();this.removeAllCallbacks();c.removeInstanceByID(this._flashID);if(this._el.parentElement){this._el.parentElement.removeChild(this._el)}}}]);return t}();function p(t,e,n){var i=this;setTimeout(function(){var r=i._callbacks.get(t);if(r){i._callbacks.remove(t);r(e,n)}},0)}Object.defineProperty(h,"VPAID_FLASH_HANDLER",{writable:false,configurable:false,value:d});window[d]=function(t,e,n,i,r,a){var s=c.getInstanceByID(t);if(!s)return;if(n==="handShake"){s._handShake(r,a)}else{if(e!=="event"){s._callCallback(n,i,r,a)}else{s._trigger(n,a)}}}},{"./jsFlashBridgeRegistry":6,"./registry":7,"./utils":8}],6:[function(t,e,n){"use strict";var i=t("./registry").SingleValueRegistry;var r=new i;var a={};Object.defineProperty(a,"addInstance",{writable:false,configurable:false,value:function s(t,e){r.add(t,e)}});Object.defineProperty(a,"getInstanceByID",{writable:false,configurable:false,value:function o(t){return r.get(t)}});Object.defineProperty(a,"removeInstanceByID",{writable:false,configurable:false,value:function u(t){return r.remove(t)}});e.exports=a},{"./registry":7}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}return function(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=n.MultipleValuesRegistry=function(){function t(){r(this,t);this._registries={}}i(t,[{key:"add",value:function e(t,n){if(!this._registries[t]){this._registries[t]=[]}if(this._registries[t].indexOf(n)===-1){this._registries[t].push(n)}}},{key:"get",value:function n(t){return this._registries[t]||[]}},{key:"filterKeys",value:function a(t){return Object.keys(this._registries).filter(t)}},{key:"findByValue",value:function s(t){var e=this;var n=Object.keys(this._registries).filter(function(n){return e._registries[n].indexOf(t)!==-1});return n}},{key:"remove",value:function o(t,e){if(!this._registries[t]){return}var n=this._registries[t].indexOf(e);if(n<0){return}return this._registries[t].splice(n,1)}},{key:"removeByKey",value:function u(t){var e=this._registries[t];delete this._registries[t];return e}},{key:"removeByValue",value:function l(t){var e=this;var n=this.findByValue(t);return n.map(function(n){return e.remove(n,t)})}},{key:"removeAll",value:function c(){var t=this._registries;this._registries={};return t}},{key:"size",value:function d(){return Object.keys(this._registries).length}}]);return t}();var s=n.SingleValueRegistry=function(){function t(){r(this,t);this._registries={}}i(t,[{key:"add",value:function e(t,n){this._registries[t]=n}},{key:"get",value:function n(t){return this._registries[t]}},{key:"filterKeys",value:function a(t){return Object.keys(this._registries).filter(t)}},{key:"findByValue",value:function s(t){var e=this;var n=Object.keys(this._registries).filter(function(n){return e._registries[n]===t});return n}},{key:"remove",value:function o(t){var e=this._registries[t];delete this._registries[t];return e}},{key:"removeByValue",value:function u(t){var e=this;var n=this.findByValue(t);return n.map(function(t){return e.remove(t)})}},{key:"removeAll",value:function l(){var t=this._registries;this._registries={};return t}},{key:"size",value:function c(){return Object.keys(this._registries).length}}]);return t}()},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.unique=i;n.noop=r;n.callbackTimeout=a;n.createElementWithID=s;n.isPositiveInt=o;n.stringEndsWith=l;n.hideFlashEl=c;function i(t){var e=-1;return function(n){return t+"_"+ ++e}}function r(){}function a(t,e,n){var i=setTimeout(function(){e=r;n()},t);return function(){clearTimeout(i);e.apply(this,arguments)}}function s(t,e){var n=arguments.length<=2||arguments[2]===undefined?false:arguments[2];var i=document.createElement("div");i.id=e;if(n){t.innerHTML=""}t.appendChild(i);return i}function o(t,e){return!isNaN(parseFloat(t))&&isFinite(t)&&t>0?t:e}var u=function(){if(String.prototype.endsWith)return String.prototype.endsWith;return function t(e,n){var i=this.toString();if(n===undefined||n>i.length){n=i.length}n-=e.length;var r=i.indexOf(e,n);return r!==-1&&r===n}}();function l(t,e){return u.call(t,e)}function c(t){t.style.position="absolute";t.style.left="-1px";t.style.top="-1px";t.style.width="1px";t.style.height="1px"}},{}],9:[function(t,e,n){"use strict";var i=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];var r=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"];var a=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"];var s=["setAdVolume"];function o(t,e,n){}o.prototype.handshakeVersion=function(t,e){};o.prototype.initAd=function(t,e,n,i,r,a,s){};o.prototype.startAd=function(t){};o.prototype.stopAd=function(t){};o.prototype.skipAd=function(t){};o.prototype.resizeAd=function(t,e,n,i){};o.prototype.pauseAd=function(t){};o.prototype.resumeAd=function(t){};o.prototype.expandAd=function(t){};o.prototype.collapseAd=function(t){};o.prototype.subscribe=function(t,e,n){};o.prototype.unsubscribe=function(t,e){};o.prototype.getAdLinear=function(t){};o.prototype.getAdWidth=function(t){};o.prototype.getAdHeight=function(t){};o.prototype.getAdExpanded=function(t){};o.prototype.getAdSkippableState=function(t){};o.prototype.getAdRemainingTime=function(t){};o.prototype.getAdDuration=function(t){};o.prototype.getAdVolume=function(t){};o.prototype.getAdCompanions=function(t){};o.prototype.getAdIcons=function(t){};o.prototype.setAdVolume=function(t,e){};l(o,"METHODS",i);l(o,"GETTERS",a);l(o,"SETTERS",s);l(o,"EVENTS",r);var u=i.filter(function(t){return["skipAd"].indexOf(t)===-1});l(o,"checkVPAIDInterface",function c(t){var e=u.every(function(e){return typeof t[e]==="function"});return e});e.exports=o;function l(t,e,n){Object.defineProperty(t,e,{writable:false,configurable:false,value:n})}},{}],10:[function(t,e,n){"use strict";var i=t("./IVPAIDAdUnit");var r=t("./subscriber");var a=i.checkVPAIDInterface;var s=t("./utils");var o=i.METHODS;var u="AdError";var l="AdClickThru";var c=i.EVENTS.filter(function(t){return t!=l});function d(t,e,n,i){this._isValid=a(t);if(this._isValid){this._creative=t;this._el=e;this._videoEl=n;this._iframe=i;this._subscribers=new r;f.call(this)}}d.prototype=Object.create(i.prototype);d.prototype.isValidVPAIDAd=function g(){return this._isValid};i.METHODS.forEach(function(t){var e=["subscribe","unsubscribe","initAd"];if(e.indexOf(t)!==-1)return;d.prototype[t]=function(){var e=i.prototype[t].length;var n=Array.prototype.slice.call(arguments);var r=e===n.length?n.pop():undefined;setTimeout(function(){var e,i=null;try{e=this._creative[t].apply(this._creative,n)}catch(a){i=a}v(r,this._subscribers,i,e)}.bind(this),0)}});d.prototype.initAd=function m(t,e,n,i,r,a,o){r=r||{};a=s.extend({slot:this._el,videoSlot:this._videoEl},a||{});setTimeout(function(){var s;try{this._creative.initAd(t,e,n,i,r,a)}catch(u){s=u}v(o,this._subscribers,s)}.bind(this),0)};d.prototype.subscribe=function y(t,e,n){this._subscribers.subscribe(e,t,n)};d.prototype.unsubscribe=function A(t,e){this._subscribers.unsubscribe(e,t)};d.prototype.on=d.prototype.subscribe;d.prototype.off=d.prototype.unsubscribe;i.GETTERS.forEach(function(t){d.prototype[t]=function(e){setTimeout(function(){var n,i=null;try{n=this._creative[t]()}catch(r){i=r}v(e,this._subscribers,i,n)}.bind(this),0)}});d.prototype.setAdVolume=function _(t,e){setTimeout(function(){var n,i=null;try{this._creative.setAdVolume(t);n=this._creative.getAdVolume()}catch(r){i=r}if(!i){i=s.validate(n===t,"failed to apply volume: "+t)}v(e,this._subscribers,i,n)}.bind(this),0)};d.prototype._destroy=function k(){this.stopAd();this._subscribers.unsubscribeAll()};function f(){c.forEach(function(t){this._creative.subscribe(p.bind(this,t),t)}.bind(this));this._creative.subscribe(h.bind(this),l);if(this._videoEl){var t=this._iframe.contentDocument.documentElement;var e=this._videoEl;t.addEventListener("click",function(n){if(n.target===t){e.click()}})}}function h(t,e,n){this._subscribers.triggerSync(l,{url:t,id:e,playerHandles:n})}function p(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}function v(t,e,n,i){if(t){t(n,i)}else if(n){e.trigger(u,n)}}e.exports=d},{"./IVPAIDAdUnit":9,"./subscriber":12,"./utils":13}],11:[function(t,e,n){"use strict";var i=t("./utils");var r=i.unique("vpaidIframe");var a=t("./VPAIDAdUnit");var s="<!DOCTYPE html>"+'<html lang="en">'+'<head><meta charset="UTF-8"></head>'+'<body style="margin:0;padding:0"><div class="ad-element"></div>'+'<script type="text/javascript" src="{{iframeURL_JS}}"></script>'+'<script type="text/javascript">'+'window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');'+"</script>"+"</body>"+"</html>";var o="AdStopped";function u(t,e,n,a){n=n||{};this._id=r();this._destroyed=false;this._frameContainer=i.createElementInEl(t,"div");this._videoEl=e;this._vpaidOptions=a||{timeout:1e4};this._templateConfig={template:n.template||s,extraOptions:n.extraOptions||{}}}u.prototype.destroy=function m(){if(this._destroyed){return}this._destroyed=true;d.call(this)};u.prototype.isDestroyed=function y(){return this._destroyed};u.prototype.loadAdUnit=function A(t,e){v.call(this);d.call(this);var n=this;var r=i.createIframeWithContent(this._frameContainer,this._templateConfig.template,i.extend({iframeURL_JS:t,iframeID:this.getID(),origin:g()},this._templateConfig.extraOptions));this._frame=r;this._onLoad=i.callbackTimeout(this._vpaidOptions.timeout,s.bind(this),u.bind(this));window.addEventListener("message",this._onLoad);function s(t){if(t.origin!==g())return;var r=JSON.parse(t.data);if(r.id!==n.getID())return;var s,u,l;if(!n._frame.contentWindow){u="the iframe is not anymore in the DOM tree"}else{l=n._frame.contentWindow.getVPAIDAd;u=i.validate(typeof l==="function","the ad didn't return a function to create an ad")}if(!u){var d=n._frame.contentWindow.document.querySelector(".ad-element");s=new a(l(),d,n._videoEl,n._frame);s.subscribe(o,c.bind(n));u=i.validate(s.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}n._adUnit=s;h.call(n);e(u,u?null:s);return true}function u(){e("timeout",null)}};u.prototype.unloadAdUnit=function _(){d.call(this)};u.prototype.getID=function(){return this._id};function l(t){var e=this[t];if(e){e.remove();delete this[t]}}function c(){f.call(this);delete this._adUnit}function d(){f.call(this);p.call(this)}function f(){l.call(this,"_frame");h.call(this)}function h(){if(this._onLoad){window.removeEventListener("message",this._onLoad);i.clearCallbackTimeout(this._onLoad);delete this._onLoad}}function p(){if(this._adUnit){this._adUnit.stopAd();delete this._adUnit}}function v(){if(this._destroyed){throw new Error("VPAIDHTML5Client already destroyed!")}}function g(){if(window.location.origin){return window.location.origin}else{return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}}e.exports=u;window.VPAIDHTML5Client=u},{"./VPAIDAdUnit":10,"./utils":13}],12:[function(t,e,n){"use strict";function i(){this._subscribers={}}i.prototype.subscribe=function r(t,e,n){if(!this.isHandlerAttached(t,e)){this.get(e).push({handler:t,context:n,eventName:e})}};i.prototype.unsubscribe=function a(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t!==e.handler})};i.prototype.unsubscribeAll=function s(){this._subscribers={}};i.prototype.trigger=function(t,e){var n=this;var i=this.get(t).concat(this.get("*"));i.forEach(function(t){setTimeout(function(){if(n.isHandlerAttached(t.handler,t.eventName)){t.handler.call(t.context,e)}},0)})};i.prototype.triggerSync=function(t,e){var n=this.get(t).concat(this.get("*"));n.forEach(function(t){t.handler.call(t.context,e)})};i.prototype.get=function o(t){if(!this._subscribers[t]){this._subscribers[t]=[]}return this._subscribers[t]};i.prototype.isHandlerAttached=function u(t,e){return this.get(e).some(function(e){return t===e.handler})};e.exports=i},{}],13:[function(t,e,n){"use strict";function i(){}function r(t,e){return t?null:new Error(e)}var a={};function s(t){var e=a[t];if(e){clearTimeout(e);delete a[t]}}function o(t,e,n){var r,o;o=setTimeout(function(){e=i;delete o[r];n()},t);r=function(){if(e.apply(this,arguments)){s(r)}};a[r]=o;return r}function u(t,e,n){var i=document.createElement(e);if(n)i.id=n;t.appendChild(i);return i}function l(t,e,n){var i=c(t,null,n.zIndex);if(!f(i,d(e,n)))return;return i}function c(t,e,n){var i=document.createElement("iframe");i.src=e||"about:blank";i.marginWidth="0";i.marginHeight="0";i.frameBorder="0";i.width="100%";i.height="100%";i.style.position="absolute";i.style.left="0";i.style.top="0";i.style.margin="0px";i.style.padding="0px";i.style.border="none";if(n){i.style.zIndex=n}i.setAttribute("SCROLLING","NO");t.innerHTML="";t.appendChild(i);return i}function d(t,e){Object.keys(e).forEach(function(n){var i=typeof i==="object"?JSON.stringify(e[n]):e[n];t=t.replace(new RegExp("{{"+n+"}}","g"),i)});return t}function f(t,e){var n=t.contentWindow&&t.contentWindow.document;if(!n)return false;n.write(e);return true}function h(t,e){Object.keys(e).forEach(function(n){t[n]=e[n]});return t}function p(t){var e=-1;return function(){return t+"_"+ ++e}}e.exports={noop:i,validate:r,clearCallbackTimeout:s,callbackTimeout:o,createElementInEl:u,createIframeWithContent:l,createIframe:c,simpleTemplate:d,setIframeContent:f,extend:h,unique:p}},{}],14:[function(t,e,n){"use strict";var i=t("./InLine");var r=t("./Wrapper");function a(t){if(!(this instanceof a)){return new a(t)}this.initialize(t)}a.prototype.initialize=function(t){this.id=t.attr("id");this.sequence=t.attr("sequence");if(t.inLine){this.inLine=new i(t.inLine)}if(t.wrapper){this.wrapper=new r(t.wrapper)}};e.exports=a},{"./InLine":17,"./Wrapper":27}],15:[function(t,e,n){"use strict";var i=t("./TrackingEvent");var r=t("../../utils/utilityFunctions");var a=t("../../utils/xml");function s(t){if(!(this instanceof s)){return new s(t)}this.creativeType=a.attr(t.staticResource,"creativeType");this.staticResource=a.keyValue(t.staticResource);var e=null;if(a.keyValue(t.HTMLResource)){e=a.keyValue(t.HTMLResource)}else if(a.keyValue(t.hTMLResource)){e=a.keyValue(t.hTMLResource)}this.htmlResource=e;var n=null;if(a.keyValue(t.IFrameResource)){
n=a.keyValue(t.IFrameResource)}else if(a.keyValue(t.iFrameresource)){n=a.keyValue(t.iFrameresource)}this.iframeResource=n;this.id=a.attr(t,"id");this.width=a.attr(t,"width");this.height=a.attr(t,"height");this.expandedWidth=a.attr(t,"expandedWidth");this.expandedHeight=a.attr(t,"expandedHeight");this.scalable=a.attr(t,"scalable");this.maintainAspectRatio=a.attr(t,"maintainAspectRatio");this.minSuggestedDuration=a.attr(t,"minSuggestedDuration");this.apiFramework=a.attr(t,"apiFramework");this.companionClickThrough=a.keyValue(t.companionClickThrough);this.trackingEvents=o(t.trackingEvents&&t.trackingEvents.tracking);function o(t){var e=[];if(r.isDefined(t)){t=r.isArray(t)?t:[t];t.forEach(function(t){e.push(new i(t))})}return e}}e.exports=s},{"../../utils/utilityFunctions":44,"../../utils/xml":45,"./TrackingEvent":20}],16:[function(t,e,n){"use strict";var i=t("./Linear");var r=t("./Companion");var a=t("../../utils/utilityFunctions");function s(t){if(!(this instanceof s)){return new s(t)}this.id=t.attr("id");this.sequence=t.attr("sequence");this.adId=t.attr("adId");this.apiFramework=t.attr("apiFramework");if(t.linear){this.linear=new i(t.linear)}if(t.companionAds){var e=[];var n=t.companionAds&&t.companionAds.companion;if(a.isDefined(n)){n=a.isArray(n)?n:[n];n.forEach(function(t){e.push(new r(t))})}this.companionAds=e}}s.prototype.isSupported=function(){if(this.linear){return this.linear.isSupported()}return true};s.parseCreatives=function o(t){var e=[];var n;if(a.isDefined(t)&&a.isDefined(t.creative)){n=a.isArray(t.creative)?t.creative:[t.creative];n.forEach(function(t){e.push(new s(t))})}return e};e.exports=s},{"../../utils/utilityFunctions":44,"./Companion":15,"./Linear":18}],17:[function(t,e,n){"use strict";var i=t("./vastUtil");var r=t("./Creative");var a=t("../../utils/utilityFunctions");var s=t("../../utils/xml");function o(t){if(!(this instanceof o)){return new o(t)}this.adTitle=s.keyValue(t.adTitle);this.adSystem=s.keyValue(t.adSystem);this.impressions=i.parseImpressions(t.impression);this.creatives=r.parseCreatives(t.creatives);this.description=s.keyValue(t.description);this.advertiser=s.keyValue(t.advertiser);this.surveys=e(t.survey);this.error=s.keyValue(t.error);this.pricing=s.keyValue(t.pricing);this.extensions=t.extensions;function e(t){if(t){return a.transformArray(a.isArray(t)?t:[t],function(t){if(a.isNotEmptyString(t.keyValue)){return{uri:t.keyValue,type:t.attr("type")}}return undefined})}return[]}}o.prototype.isSupported=function(){var t,e;if(this.creatives.length===0){return false}for(t=0,e=this.creatives.length;t<e;t+=1){if(!this.creatives[t].isSupported()){return false}}return true};e.exports=o},{"../../utils/utilityFunctions":44,"../../utils/xml":45,"./Creative":16,"./vastUtil":29}],18:[function(t,e,n){"use strict";var i=t("./TrackingEvent");var r=t("./MediaFile");var a=t("./VideoClicks");var s=t("../../utils/utilityFunctions");var o=t("./parsers");var u=t("../../utils/xml");function l(t){if(!(this instanceof l)){return new l(t)}this.duration=o.duration(u.keyValue(t.duration));this.mediaFiles=n(t.mediaFiles&&t.mediaFiles.mediaFile);this.trackingEvents=e(t.trackingEvents&&t.trackingEvents.tracking,this.duration);this.skipoffset=o.offset(u.attr(t,"skipoffset"),this.duration);if(t.videoClicks){this.videoClicks=new a(t.videoClicks)}if(t.adParameters){this.adParameters=u.keyValue(t.adParameters);if(u.attr(t.adParameters,"xmlEncoded")){this.adParameters=u.decode(this.adParameters)}}function e(t,e){var n=[];if(s.isDefined(t)){t=s.isArray(t)?t:[t];t.forEach(function(t){n.push(new i(t,e))})}return n}function n(t){var e=[];if(s.isDefined(t)){t=s.isArray(t)?t:[t];t.forEach(function(t){e.push(new r(t))})}return e}}l.prototype.isSupported=function(){var t,e;for(t=0,e=this.mediaFiles.length;t<e;t+=1){if(this.mediaFiles[t].isSupported()){return true}}return false};e.exports=l},{"../../utils/utilityFunctions":44,"../../utils/xml":45,"./MediaFile":19,"./TrackingEvent":20,"./VideoClicks":26,"./parsers":28}],19:[function(t,e,n){"use strict";var i=t("../../utils/xml");var r=t("./vastUtil");var a=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"];function s(t){if(!(this instanceof s)){return new s(t)}this.src=i.keyValue(t);for(var e=0;e<a.length;e++){var n=a[e];this[n]=t.attr(n)}}s.prototype.isSupported=function(){if(r.isVPAID(this)){return!!r.findSupportedVPAIDTech(this.type)}if(this.type==="video/x-flv"){return r.isFlashSupported()}return true};e.exports=s},{"../../utils/xml":45,"./vastUtil":29}],20:[function(t,e,n){"use strict";var i=t("./parsers");var r=t("../../utils/xml");function a(t,e){if(!(this instanceof a)){return new a(t,e)}this.name=t.attr("event");this.uri=r.keyValue(t);if("progress"===this.name){this.offset=i.offset(t.attr("offset"),e)}}e.exports=a},{"../../utils/xml":45,"./parsers":28}],21:[function(t,e,n){"use strict";var i=t("./Ad");var r=t("./VASTError");var a=t("./VASTResponse");var s=t("./vastUtil");var o=t("../../utils/async");var u=t("../../utils/http").http;var l=t("../../utils/utilityFunctions");var c=t("../../utils/xml");function d(t){if(!(this instanceof d)){return new d(t)}var e={WRAPPER_LIMIT:5};t=t||{};this.settings=l.extend({},t,e);this.errorURLMacros=[]}d.prototype.getVASTResponse=function f(t,e){var n=this;var i=s(t,e);if(i){if(l.isFunction(e)){return e(i)}throw i}o.waterfall([this._getVASTAd.bind(this,t),a],e);function a(t,e){try{var i=n._buildVASTResponse(t);e(null,i)}catch(r){e(r)}}function s(t,e){if(!t){return new r("on VASTClient.getVASTResponse, missing ad tag URL")}if(!l.isFunction(e)){return new r("on VASTClient.getVASTResponse, missing callback function")}}};d.prototype._getVASTAd=function(t,e){var n=this;a(t,function(t,i){var r=i&&l.isArray(i.ads)?i.ads:null;if(t){n._trackError(t,r);return e(t,r)}d(r.shift(),[],a);function a(t,i){if(t){n._trackError(t,i);if(r.length>0){d(r.shift(),[],a)}else{e(t,i)}}else{e(null,i)}}});function a(t,e){var i=n._requestVASTXml.bind(n,t);o.waterfall([i,s],e)}function s(t,e){var n;try{n=c.toJXONTree(t);if(l.isArray(n.ad)){n.ads=n.ad}else if(n.ad){n.ads=[n.ad]}else{n.ads=[]}e(u(n),n)}catch(i){e(new r("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml",100),null)}}function u(t){var e=c.attr(t,"version");if(!t.ad){return new r("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree",303)}if(e&&(e!=3&&e!=2)){return new r('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "'+e+'"',102)}return null}function d(t,e,i){if(e.length>=n.WRAPPER_LIMIT){return i(new r("on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is "+n.WRAPPER_LIMIT+")",302),e)}o.waterfall([function(e){if(l.isString(t)){p(t,e)}else{e(null,t)}},f],function(t,n){if(n){e.push(n)}if(t){return i(t,e)}if(n.wrapper){return d(n.wrapper.VASTAdTagURI,e,i)}return i(null,e)})}function f(t,e){try{var n=new i(t);e(h(n),n)}catch(a){e(new r("on VASTClient.getVASTAd.buildAd, error parsing xml",100),null)}}function h(t){var e=t.wrapper;var n=t.inLine;var i="on VASTClient.getVASTAd.validateAd, ";if(n&&e){return new r(i+"InLine and Wrapper both found on the same Ad",101)}if(!n&&!e){return new r(i+"nor wrapper nor inline elements found on the Ad",101)}if(n&&!n.isSupported()){return new r(i+"could not find MediaFile that is supported by this video player",403)}if(e&&!e.VASTAdTagURI){return new r(i+"missing 'VASTAdTagURI' in wrapper",101)}return null}function p(t,e){n._requestVASTXml(t,function(t,n){if(t){return e(t)}try{var i=c.toJXONTree(n);e(u(i),i.ad)}catch(a){e(new r("on VASTClient.getVASTAd.requestVASTAd, error parsing xml",100))}})}};d.prototype._requestVASTXml=function h(t,e){try{if(l.isFunction(t)){t(i)}else{u.get(t,i,{withCredentials:true})}}catch(n){e(n)}function i(t,n,i){if(t){var a=l.isDefined(i)?"on VASTClient.requestVastXML, HTTP request error with status '"+i+"'":"on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";return e(new r(a,301),null)}e(null,n)}};d.prototype._buildVASTResponse=function p(t){var e=new a;n(e,t);i(e);return e;function n(t,e){e.forEach(function(e){t.addAd(e)})}function i(t){var e=t.trackingEvents.progress;if(!t.hasLinear()){throw new r("on VASTClient._buildVASTResponse, Received an Ad type that is not supported",200)}if(t.duration===undefined){throw new r("on VASTClient._buildVASTResponse, Missing duration field in VAST response",101)}if(e){e.forEach(function(t){if(!l.isNumber(t.offset)){throw new r("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event",101)}})}}};d.prototype._trackError=function(t,e){if(!l.isArray(e)||e.length===0){return}var n=[];e.forEach(i);s.track(n,{ERRORCODE:t.code||900});function i(t){if(t.wrapper&&t.wrapper.error){n.push(t.wrapper.error)}if(t.inLine&&t.inLine.error){n.push(t.inLine.error)}}};e.exports=d},{"../../utils/async":39,"../../utils/http":41,"../../utils/utilityFunctions":44,"../../utils/xml":45,"./Ad":14,"./VASTError":22,"./VASTResponse":24,"./vastUtil":29}],22:[function(t,e,n){"use strict";function i(t,e){this.message="VAST Error: "+(t||"");if(e){this.code=e}}i.prototype=new Error;i.prototype.name="VAST Error";e.exports=i},{}],23:[function(t,e,n){"use strict";var i=t("./VASTResponse");var r=t("./VASTError");var a=t("./VASTTracker");var s=t("./vastUtil");var o=t("../../utils/async");var u=t("../../utils/dom");var l=t("../../utils/playerUtils");var c=t("../../utils/utilityFunctions");function d(t){if(!(this instanceof d)){return new d(t)}this.player=t}d.prototype.playAd=function f(t,e){var n=this;e=e||c.noop;if(!(t instanceof i)){return e(new r("On VASTIntegrator, missing required VASTResponse"))}o.waterfall([function(e){e(null,t)},this._selectAdSource.bind(this),this._createVASTTracker.bind(this),this._addClickThrough.bind(this),this._addSkipButton.bind(this),this._setupEvents.bind(this),this._playSelectedAd.bind(this)],function(t,i){if(t&&i){n._trackError(t,i)}e(t,i)});this._adUnit={_src:null,type:"VAST",pauseAd:function(){n.player.pause(true)},resumeAd:function(){n.player.play(true)},isPaused:function(){return n.player.paused(true)},getSrc:function(){return this._src}};return this._adUnit};d.prototype._selectAdSource=function h(t,e){var n;var i=u.getDimension(this.player.el()).width;t.mediaFiles.sort(function a(t,e){var n=Math.abs(i-t.width);var r=Math.abs(i-e.width);return n-r});n=this.player.selectSource(t.mediaFiles).source;if(n){if(this._adUnit){this._adUnit._src=n}return e(null,n,t)}e(new r("Could not find Ad mediafile supported by this player",403),t)};d.prototype._createVASTTracker=function p(t,e,n){try{n(null,t,new a(t.src,e),e)}catch(i){n(i,e)}};d.prototype._setupEvents=function v(t,e,n,i){var r;var a=this.player;a.on("fullscreenchange",o);a.on("vast.adStart",d);a.on("pause",u);a.on("timeupdate",c);a.on("volumechange",f);l.once(a,["vast.adEnd","vast.adsCancel"],s);l.once(a,["vast.adEnd","vast.adsCancel","vast.adSkip"],function(t){if(t.type==="vast.adEnd"){e.trackComplete()}});return i(null,t,n);function s(){a.off("fullscreenchange",o);a.off("vast.adStart",d);a.off("pause",u);a.off("timeupdate",c);a.off("volumechange",f)}function o(){if(a.isFullscreen()){e.trackFullscreen()}else{e.trackExitFullscreen()}}function u(){if(Math.abs(a.duration()-a.currentTime())<2){return}e.trackPause();l.once(a,["play","vast.adEnd","vast.adsCancel"],function(t){if(t.type==="play"){e.trackResume()}})}function c(){var t=a.currentTime()*1e3;e.trackProgress(t)}function d(){e.trackImpressions();e.trackCreativeView()}function f(){var t=a.muted();if(t){e.trackMute()}else if(r){e.trackUnmute()}r=t}};d.prototype._addSkipButton=function g(t,e,n,i){var r;var a=this;if(c.isNumber(n.skipoffset)){r=n.skipoffset/1e3;s(this.player,r)}i(null,t,e,n);function s(t,e){var n=o(t);var i=d.bind(a,n,e,t);t.el().appendChild(n);t.on("timeupdate",i);l.once(t,["vast.adEnd","vast.adsCancel"],r);function r(){t.off("timeupdate",i);u.remove(n)}}function o(t){var n=window.document.createElement("div");u.addClass(n,"vast-skip-button");n.onclick=function(i){if(u.hasClass(n,"enabled")){e.trackSkip();t.trigger("vast.adSkip")}if(window.Event.prototype.stopPropagation!==undefined){i.stopPropagation()}else{return false}};return n}function d(t,e,n){var i=Math.ceil(e-n.currentTime());if(i>0){t.innerHTML="Skip in "+c.toFixedDigits(i,2)+"..."}else{if(!u.hasClass(t,"enabled")){u.addClass(t,"enabled");t.innerHTML="Skip ad"}}}};d.prototype._addClickThrough=function m(t,e,n,i){var r=this.player;var a=d(r,e,n);var o=f.bind(this,a,n,r);r.el().insertBefore(a,r.controlBar.el());r.on("timeupdate",o);l.once(r,["vast.adEnd","vast.adsCancel"],p);return i(null,t,e,n);function d(t,e,n){var i=window.document.createElement("a");var r=n.clickThrough;u.addClass(i,"vast-blocker");i.href=h(r,t);if(c.isString(r)){i.target="_blank"}i.onclick=function(n){if(t.paused()){t.play();if(window.Event.prototype.stopPropagation!==undefined){n.stopPropagation()}return false}t.pause();e.trackClick()};return i}function f(t,e,n){t.href=h(e.clickThrough,n)}function h(e,n){var i={ASSETURI:t.src,CONTENTPLAYHEAD:s.formatProgress(n.currentTime()*1e3)};return e?s.parseURLMacro(e,i):"#"}function p(){r.off("timeupdate",o);u.remove(a)}};d.prototype._playSelectedAd=function y(t,e,n){var i=this.player;i.preload("auto");i.src(t);l.once(i,["durationchange","error","vast.adsCancel"],function(t){if(t.type==="durationchange"){a()}else if(t.type==="error"){n(new r("on VASTIntegrator, Player is unable to play the Ad",400),e)}});function a(){l.once(i,["playing","vast.adsCancel"],function(t){if(t.type==="vast.adsCancel"){return}i.trigger("vast.adStart");i.on("ended",r);i.on("vast.adsCancel",r);i.on("vast.adSkip",r);function r(t){if(t.type==="ended"&&i.duration()-i.currentTime()>3){return}i.off("ended",r);i.off("vast.adsCancel",r);i.off("vast.adSkip",r);if(t.type==="ended"||t.type==="vast.adSkip"){n(null,e)}}});i.play()}};d.prototype._trackError=function A(t,e){s.track(e.errorURLMacros,{ERRORCODE:t.code||900})};e.exports=d},{"../../utils/async":39,"../../utils/dom":40,"../../utils/playerUtils":42,"../../utils/utilityFunctions":44,"./VASTError":22,"./VASTResponse":24,"./VASTTracker":25,"./vastUtil":29}],24:[function(t,e,n){"use strict";var i=t("./Ad");var r=t("./VideoClicks");var a=t("./Linear");var s=t("./InLine");var o=t("./Wrapper");var u=t("../../utils/utilityFunctions");var l=t("../../utils/xml");window.InLine__A=s;function c(){if(!(this instanceof c)){return new c}this._linearAdded=false;this.ads=[];this.errorURLMacros=[];this.impressions=[];this.clickTrackings=[];this.customClicks=[];this.trackingEvents={};this.mediaFiles=[];this.clickThrough=undefined;this.adTitle="";this.duration=undefined;this.skipoffset=undefined}c.prototype.addAd=function(t){var e,n;if(t instanceof i){e=t.inLine;n=t.wrapper;this.ads.push(t);if(e){this._addInLine(e)}if(n){this._addWrapper(n)}}};c.prototype._addErrorTrackUrl=function(t){var e=t instanceof l.JXONTree?l.keyValue(t):t;if(e){this.errorURLMacros.push(e)}};c.prototype._addImpressions=function(t){u.isArray(t)&&d(this.impressions,t)};c.prototype._addClickThrough=function(t){if(u.isNotEmptyString(t)){this.clickThrough=t}};c.prototype._addClickTrackings=function(t){u.isArray(t)&&d(this.clickTrackings,t)};c.prototype._addCustomClicks=function(t){u.isArray(t)&&d(this.customClicks,t)};c.prototype._addTrackingEvents=function(t){var e=this.trackingEvents;if(t){t=u.isArray(t)?t:[t];t.forEach(function(t){if(!e[t.name]){e[t.name]=[]}e[t.name].push(t)})}};c.prototype._addTitle=function(t){if(u.isNotEmptyString(t)){this.adTitle=t}};c.prototype._addDuration=function(t){if(u.isNumber(t)){this.duration=t}};c.prototype._addVideoClicks=function(t){if(t instanceof r){this._addClickThrough(t.clickThrough);this._addClickTrackings(t.clickTrackings);this._addCustomClicks(t.customClicks)}};c.prototype._addMediaFiles=function(t){u.isArray(t)&&d(this.mediaFiles,t)};c.prototype._addSkipoffset=function(t){if(t){this.skipoffset=t}};c.prototype._addAdParameters=function(t){if(t){this.adParameters=t}};c.prototype._addLinear=function(t){if(t instanceof a){this._addDuration(t.duration);this._addTrackingEvents(t.trackingEvents);this._addVideoClicks(t.videoClicks);this._addMediaFiles(t.mediaFiles);this._addSkipoffset(t.skipoffset);this._addAdParameters(t.adParameters);this._linearAdded=true}};c.prototype._addInLine=function(t){var e=this;if(t instanceof s){this._addTitle(t.adTitle);this._addErrorTrackUrl(t.error);this._addImpressions(t.impressions);t.creatives.forEach(function(t){if(t.linear){e._addLinear(t.linear)}})}};c.prototype._addWrapper=function(t){var e=this;if(t instanceof o){this._addErrorTrackUrl(t.error);this._addImpressions(t.impressions);t.creatives.forEach(function(t){var n=t.linear;if(n){e._addVideoClicks(n.videoClicks);e.clickThrough=undefined;e._addTrackingEvents(n.trackingEvents)}})}};c.prototype.hasLinear=function(){return this._linearAdded};function d(t,e){e.forEach(function(e){t.push(e)})}e.exports=c},{"../../utils/utilityFunctions":44,"../../utils/xml":45,"./Ad":14,"./InLine":17,"./Linear":18,"./VideoClicks":26,"./Wrapper":27}],25:[function(t,e,n){"use strict";var i=t("./VASTError");var r=t("./VASTResponse");var a=t("./vastUtil");var s=t("../../utils/utilityFunctions");function o(t,e){if(!(this instanceof o)){return new o(t,e)}this.sanityCheck(t,e);this.initialize(t,e)}o.prototype.initialize=function(t,e){this.response=e;this.assetURI=t;this.progress=0;this.quartiles={firstQuartile:{tracked:false,time:Math.round(25*e.duration)/100},midpoint:{tracked:false,time:Math.round(50*e.duration)/100},thirdQuartile:{tracked:false,time:Math.round(75*e.duration)/100}}};o.prototype.sanityCheck=function(t,e){if(!s.isString(t)||s.isEmptyString(t)){throw new i("on VASTTracker constructor, missing required the URI of the ad asset being played")}if(!(e instanceof r)){throw new i("on VASTTracker constructor, missing required VAST response")}};o.prototype.trackURLs=function u(t,e){if(s.isArray(t)&&t.length>0){e=s.extend({ASSETURI:this.assetURI,CONTENTPLAYHEAD:a.formatProgress(this.progress)},e||{});a.track(t,e)}};o.prototype.trackEvent=function l(t,e){this.trackURLs(n(this.response.trackingEvents[t]));if(e){this.response.trackingEvents[t]=undefined}function n(t){var e;if(t){e=[];t.forEach(function(t){e.push(t.uri)})}return e}};o.prototype.trackProgress=function c(t){var e=this;var n=[];var i=true;var r=false;var a=this.response.trackingEvents;if(s.isNumber(t)){u("start",i,t>0);u("rewind",r,o(this.progress,t));l(t);d(t);f();this.progress=t}function o(e,n){var i=3e3;return e>t&&Math.abs(n-e)>i}function u(t,e,i){if(a[t]&&i){n.push({name:t,trackOnce:!!e})}}function l(t){var n=e.quartiles;var r=e.quartiles.firstQuartile;var a=e.quartiles.midpoint;var s=e.quartiles.thirdQuartile;if(!r.tracked){o("firstQuartile",t)}else if(!a.tracked){o("midpoint",t)}else if(!s.tracked){o("thirdQuartile",t)}function o(t,e){var r=n[t];if(c(r,e)){r.tracked=true;u(t,i,true)}}}function c(t,e){var n=t.time;return e>=n&&e<=n+5e3}function d(t){if(!s.isArray(a.progress)){return}var n=[];a.progress.forEach(function(i){if(i.offset<=t){e.trackURLs([i.uri])}else{n.push(i)}});a.progress=n}function f(){n.forEach(function(t){e.trackEvent(t.name,t.trackOnce)})}};["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(t){o.prototype["track"+s.capitalize(t)]=function(){this.trackEvent(t)}});["start","skip","close","closeLinear"].forEach(function(t){o.prototype["track"+s.capitalize(t)]=function(){this.trackEvent(t,true)}});["firstQuartile","midpoint","thirdQuartile"].forEach(function(t){o.prototype["track"+s.capitalize(t)]=function(){this.quartiles[t].tracked=true;this.trackEvent(t,true)}});o.prototype.trackComplete=function(){if(this.quartiles.thirdQuartile.tracked){this.trackEvent("complete",true)}};o.prototype.trackErrorWithCode=function d(t){if(s.isNumber(t)){this.trackURLs(this.response.errorURLMacros,{ERRORCODE:t})}};o.prototype.trackImpressions=function f(){this.trackURLs(this.response.impressions)};o.prototype.trackCreativeView=function h(){this.trackEvent("creativeView")};o.prototype.trackClick=function p(){this.trackURLs(this.response.clickTrackings)};e.exports=o},{"../../utils/utilityFunctions":44,"./VASTError":22,"./VASTResponse":24,"./vastUtil":29}],26:[function(t,e,n){"use strict";var i=t("../../utils/utilityFunctions");var r=t("../../utils/xml");function a(t){if(!(this instanceof a)){return new a(t)}this.clickThrough=r.keyValue(t.clickThrough);this.clickTrackings=e(t.clickTracking);this.customClicks=e(t.customClick);function e(t){var e=[];if(t){t=i.isArray(t)?t:[t];t.forEach(function(t){e.push(r.keyValue(t))})}return e}}e.exports=a},{"../../utils/utilityFunctions":44,"../../utils/xml":45}],27:[function(t,e,n){"use strict";var i=t("./vastUtil");var r=t("./Creative");var a=t("../../utils/utilityFunctions");var s=t("../../utils/xml");function o(t){if(!(this instanceof o)){return new o(t)}this.adSystem=s.keyValue(t.adSystem);this.impressions=i.parseImpressions(t.impression);this.VASTAdTagURI=s.keyValue(t.vASTAdTagURI);this.creatives=r.parseCreatives(t.creatives);this.error=s.keyValue(t.error);this.extensions=t.extensions;this.followAdditionalWrappers=a.isDefined(s.attr(t,"followAdditionalWrappers"))?s.attr(t,"followAdditionalWrappers"):true;this.allowMultipleAds=s.attr(t,"allowMultipleAds");this.fallbackOnNoAd=s.attr(t,"fallbackOnNoAd")}e.exports=o},{"../../utils/utilityFunctions":44,"../../utils/xml":45,"./Creative":16,"./vastUtil":29}],28:[function(t,e,n){"use strict";var i=t("../../utils/utilityFunctions");var r=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;var a={duration:function s(t){var e,n;if(i.isString(t)){e=t.match(r);if(e){n=a(e[1])+s(e[2])+o(e[3])+parseInt(e[5]||0)}}return isNaN(n)?null:n;function a(t){return parseInt(t,10)*60*60*1e3}function s(t){return parseInt(t,10)*60*1e3}function o(t){return parseInt(t,10)*1e3}},offset:function o(t,e){if(n(t)){return i(t,e)}return a.duration(t);function n(t){var e=/^\d+(\.\d+)?%$/g;return e.test(t)}function i(t,e){if(e){return r(e,parseFloat(t.replace("%","")))}return null}function r(t,e){return t*e/100}}};e.exports=a},{"../../utils/utilityFunctions":44}],29:[function(t,e,n){"use strict";var i=t("../../utils/utilityFunctions");var r=t("../vpaid/VPAIDHTML5Tech");var a=t("../vpaid/VPAIDFlashTech");var s=t("VPAIDFLASHClient/js/VPAIDFLASHClient");var o={track:function u(t,e){var n=o.parseURLMacros(t,e);var i=[];n.forEach(function(t){var e=new Image;e.src=t;i.push(e)});return i},parseURLMacros:function l(t,e){var n=[];e=e||{};if(!e["CACHEBUSTING"]){e["CACHEBUSTING"]=Math.round(Math.random()*1e10)}t.forEach(function(t){n.push(o._parseURLMacro(t,e))});return n},parseURLMacro:function c(t,e){e=e||{};if(!e["CACHEBUSTING"]){e["CACHEBUSTING"]=Math.round(Math.random()*1e10)}return o._parseURLMacro(t,e)},_parseURLMacro:function d(t,e){e=e||{};i.forEach(e,function(e,n){t=t.replace(new RegExp("\\["+n+"\\]","gm"),e)});return t},parseDuration:function f(t){var e=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;var n,r;if(i.isString(t)){n=t.match(e);if(n){r=a(n[1])+s(n[2])+o(n[3])+parseInt(n[5]||0)}}return isNaN(r)?null:r;function a(t){return parseInt(t,10)*60*60*1e3}function s(t){return parseInt(t,10)*60*1e3}function o(t){return parseInt(t,10)*1e3}},parseImpressions:function h(t){if(t){t=i.isArray(t)?t:[t];return i.transformArray(t,function(t){if(i.isNotEmptyString(t.keyValue)){return t.keyValue}return undefined})}return[]},formatProgress:function p(t){var e,n,r,a;e=t/(60*60*1e3);e=Math.floor(e);n=t/(60*1e3)%60;n=Math.floor(n);r=t/1e3%60;r=Math.floor(r);a=t%1e3;return i.toFixedDigits(e,2)+":"+i.toFixedDigits(n,2)+":"+i.toFixedDigits(r,2)+"."+i.toFixedDigits(a,3)},parseOffset:function v(t,e){if(n(t)){return i(t,e)}return o.parseDuration(t);function n(t){var e=/^\d+(\.\d+)?%$/g;return e.test(t)}function i(t,e){if(e){return r(e,parseFloat(t.replace("%","")))}return null}function r(t,e){return t*e/100}},VPAID_techs:[a,r],isVPAID:function g(t){return!!t&&t.apiFramework==="VPAID"},findSupportedVPAIDTech:function m(t){var e,n,i;for(e=0,n=this.VPAID_techs.length;e<n;e+=1){i=this.VPAID_techs[e];if(i.supports(t)){return i}}return null},isFlashSupported:function y(){return s.isSupported()},runFlashSupportCheck:function A(t){s.runFlashTest({data:t})}};e.exports=o},{"../../utils/utilityFunctions":44,"../vpaid/VPAIDFlashTech":31,"../vpaid/VPAIDHTML5Tech":32,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],30:[function(t,e,n){"use strict";var i=t("../vast/VASTError");var r=t("../../utils/utilityFunctions");function a(t,e){if(!(this instanceof a)){return new a(t,e)}n(t,e);this.options=r.extend({},e);this._adUnit=t;function n(t,e){if(!t||!a.checkVPAIDInterface(t)){throw new i("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface")}if(!r.isObject(e)){throw new i("on VPAIDAdUnitWrapper, expected options hash  but got '"+e+"'")}if(!("responseTimeout"in e)||!r.isNumber(e.responseTimeout)){throw new i("on VPAIDAdUnitWrapper, expected responseTimeout in options")}}}a.checkVPAIDInterface=function s(t){var e=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"];for(var n=0,i=e.length;n<i;n++){if(!t||!r.isFunction(t[e[n]])){return false}}return a(t)&&s(t);function a(t){return r.isFunction(t.subscribe)||r.isFunction(t.addEventListener)||r.isFunction(t.on)}function s(t){return r.isFunction(t.unsubscribe)||r.isFunction(t.removeEventListener)||r.isFunction(t.off)}};a.prototype.adUnitAsyncCall=function(){var t=r.arrayLikeObjToArray(arguments);var e=t.shift();var n=t.pop();var a;s(e,n,this._adUnit);t.push(o());this._adUnit[e].apply(this._adUnit,t);a=setTimeout(function(){a=null;n(new i("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+e+"'"));n=r.noop},this.options.responseTimeout);function s(t,e,n){if(!r.isString(t)||!r.isFunction(n[t])){throw new i("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name")}if(!r.isFunction(e)){throw new i("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}}function o(){return function(){if(a){clearTimeout(a)}n.apply(this,arguments)}}};a.prototype.on=function(t,e){var n=this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on;n.call(this._adUnit,t,e)};a.prototype.off=function(t,e){var n=this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off;n.call(this._adUnit,t,e)};a.prototype.waitForEvent=function(t,e,n){var a;s(t,e);n=n||null;this.on(t,o);a=setTimeout(function(){e(new i("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+t+"'"));a=null;e=r.noop},this.options.responseTimeout);function s(t,e){if(!r.isString(t)){throw new i("on VPAIDAdUnitWrapper.waitForEvent, missing evt name")}if(!r.isFunction(e)){throw new i("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}}function o(){var t=r.arrayLikeObjToArray(arguments);if(a){clearTimeout(a);a=null}t.unshift(null);e.apply(n,t)}};a.prototype.handshakeVersion=function(t,e){this.adUnitAsyncCall("handshakeVersion",t,e)};a.prototype.initAd=function(t,e,n,i,r,a){this.waitForEvent("AdLoaded",a);this._adUnit.initAd(t,e,n,i,r)};a.prototype.resizeAd=function(t,e,n,i){this.adUnitAsyncCall("resizeAd",t,e,n,i)};a.prototype.startAd=function(t){this.waitForEvent("AdStarted",t);this._adUnit.startAd()};a.prototype.stopAd=function(t){this.waitForEvent("AdStopped",t);this._adUnit.stopAd()};a.prototype.pauseAd=function(t){this.waitForEvent("AdPaused",t);this._adUnit.pauseAd()};a.prototype.resumeAd=function(t){this.waitForEvent("AdPlaying",t);this._adUnit.resumeAd()};a.prototype.expandAd=function(t){this.waitForEvent("AdExpandedChange",t);this._adUnit.expandAd()};a.prototype.collapseAd=function(t){this.waitForEvent("AdExpandedChange",t);this._adUnit.collapseAd()};a.prototype.skipAd=function(t){this.waitForEvent("AdSkipped",t);this._adUnit.skipAd()};["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(t){var e="get"+r.capitalize(t);a.prototype[e]=function(t){this.adUnitAsyncCall(e,t)}});a.prototype.setAdVolume=function(t,e){this.adUnitAsyncCall("setAdVolume",t,e)};e.exports=a},{"../../utils/utilityFunctions":44,"../vast/VASTError":22}],31:[function(t,e,n){"use strict";var i=t("../vast/VASTError");var r=t("VPAIDFLASHClient/js/VPAIDFLASHClient");var a=t("../../utils/utilityFunctions");var s=t("../../utils/dom");function o(t,e){if(!(this instanceof o)){return new o(t)}n(t);this.name="vpaid-flash";this.mediaFile=t;this.containerEl=null;this.vpaidFlashClient=null;this.settings=e;function n(t){if(!t||!a.isString(t.src)){throw new i("on VPAIDFlashTech, invalid MediaFile")}}}o.VPAIDFLASHClient=r;o.supports=function(t){return t==="application/x-shockwave-flash"&&o.VPAIDFLASHClient.isSupported()};o.prototype.loadAdUnit=function u(t,e,n){var r=this;var u=this.settings&&this.settings.vpaidFlashLoaderPath?{data:this.settings.vpaidFlashLoaderPath}:undefined;l(t,n);this.containerEl=t;this.vpaidFlashClient=new o.VPAIDFLASHClient(t,function(t){if(t){return n(t)}r.vpaidFlashClient.loadAdUnit(r.mediaFile.src,n)},u);function l(t,e){if(!s.isDomElement(t)){throw new i("on VPAIDFlashTech.loadAdUnit, invalid dom container element")}if(!a.isFunction(e)){throw new i("on VPAIDFlashTech.loadAdUnit, missing valid callback")}}};o.prototype.unloadAdUnit=function(){if(this.vpaidFlashClient){try{this.vpaidFlashClient.destroy()}catch(t){if(console&&a.isFunction(console.log)){console.log("VAST ERROR: trying to unload the VPAID adunit")}}this.vpaidFlashClient=null}if(this.containerEl){s.remove(this.containerEl);this.containerEl=null}};e.exports=o},{"../../utils/dom":40,"../../utils/utilityFunctions":44,"../vast/VASTError":22,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],32:[function(t,e,n){"use strict";var i=t("../vast/VASTError");var r=t("VPAIDHTML5Client/js/VPAIDHTML5Client");var a=t("../../utils/utilityFunctions");var s=t("../../utils/dom");function o(t){if(!(this instanceof o)){return new o(t)}e(t);this.name="vpaid-html5";this.containerEl=null;this.videoEl=null;this.vpaidHTMLClient=null;this.mediaFile=t;function e(t){if(!t||!a.isString(t.src)){throw new i(o.INVALID_MEDIA_FILE)}}}o.VPAIDHTML5Client=r;o.supports=function(t){return!a.isOldIE()&&t==="application/javascript"};o.prototype.loadAdUnit=function l(t,e,n){r(t,e,n);this.containerEl=t;this.videoEl=e;this.vpaidHTMLClient=new o.VPAIDHTML5Client(t,e,{});this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,n);function r(t,e,n){if(!s.isDomElement(t)){throw new i(o.INVALID_DOM_CONTAINER_EL)}if(!s.isDomElement(e)||e.tagName.toLowerCase()!=="video"){throw new i(o.INVALID_DOM_CONTAINER_EL)}if(!a.isFunction(n)){throw new i(o.MISSING_CALLBACK)}}};o.prototype.unloadAdUnit=function c(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(t){if(console&&a.isFunction(console.log)){console.log("VAST ERROR: trying to unload the VPAID adunit")}}this.vpaidHTMLClient=null}if(this.containerEl){s.remove(this.containerEl);this.containerEl=null}};var u="on VPAIDHTML5Tech";o.INVALID_MEDIA_FILE=u+", invalid MediaFile";o.INVALID_DOM_CONTAINER_EL=u+", invalid container HtmlElement";o.INVALID_DOM_VIDEO_EL=u+", invalid HTMLVideoElement";o.MISSING_CALLBACK=u+", missing valid callback";e.exports=o},{"../../utils/dom":40,"../../utils/utilityFunctions":44,"../vast/VASTError":22,"VPAIDHTML5Client/js/VPAIDHTML5Client":11}],33:[function(t,e,n){"use strict";var i=t("../vast/VASTError");var r=t("../vast/VASTResponse");var a=t("../vast/VASTTracker");var s=t("../vast/vastUtil");var o=t("./VPAIDAdUnitWrapper");var u=t("../../utils/async");var l=t("../../utils/dom");var c=t("../../utils/playerUtils");var d=t("../../utils/utilityFunctions");function f(t,e){if(!(this instanceof f)){return new f(t)}this.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"};this.player=t;this.containerEl=n(t);this.options={responseTimeout:5e3,VPAID_VERSION:"2.0"};this.settings=e;function n(){var e=document.createElement("div");l.addClass(e,"VPAID-container");
t.el().insertBefore(e,t.controlBar.el());return e}}f.prototype.playAd=function v(t,e){if(!(t instanceof r)){return e(new i("on VASTIntegrator.playAd, missing required VASTResponse"))}var n=this;var a=this.player;var s=this._findSupportedTech(t,this.settings);e=e||d.noop;this._adUnit=null;l.addClass(a.el(),"vjs-vpaid-ad");a.on("vast.adsCancel",f);a.one("vpaid.adEnd",function(){a.off("vast.adsCancel",f);h()});if(s){u.waterfall([function(e){e(null,s,t)},this._loadAdUnit.bind(this),this._playAdUnit.bind(this),this._finishPlaying.bind(this)],c);this._adUnit={_paused:true,type:"VPAID",pauseAd:function(){a.trigger("vpaid.pauseAd");a.pause(true)},resumeAd:function(){a.trigger("vpaid.resumeAd")},isPaused:function(){return this._paused},getSrc:function(){return s.mediaFile}}}else{var o=new i("on VPAIDIntegrator.playAd, could not find a supported mediaFile",403);c(o,this._adUnit,t)}return this._adUnit;function c(t,i,r){if(t&&r){n._trackError(r,t.code)}a.trigger("vpaid.adEnd");e(t,r)}function f(){a.trigger("vpaid.adEnd")}function h(){if(s){s.unloadAdUnit()}l.removeClass(a.el(),"vjs-vpaid-ad")}};f.prototype._findSupportedTech=function(t,e){if(!(t instanceof r)){return null}var n=t.mediaFiles.filter(s.isVPAID);var i,a,o,u;for(i=0,a=n.length;i<a;i+=1){o=n[i];u=s.findSupportedVPAIDTech(o.type);if(u){return new u(o,e)}}return null};f.prototype._createVPAIDAdUnitWrapper=function(t,e,n){return new o(t,{src:e,responseTimeout:n})};f.prototype._loadAdUnit=function(t,e,n){var i=this;var r=this.player;var a=r.el().querySelector(".vjs-tech");var s=this.settings.responseTimeout||this.options.responseTimeout;t.loadAdUnit(this.containerEl,a,function(a,o){if(a){return n(a,o,e)}try{var u=i._createVPAIDAdUnitWrapper(o,t.mediaFile.src,s);var c="vjs-"+t.name+"-ad";l.addClass(r.el(),c);r.one("vpaid.adEnd",function(){l.removeClass(r.el(),c)});n(null,u,e)}catch(d){n(d,o,e)}})};f.prototype._playAdUnit=function(t,e,n){u.waterfall([function(n){n(null,t,e)},this._handshake.bind(this),this._initAd.bind(this),this._setupEvents.bind(this),this._addSkipButton.bind(this),this._linkPlayerControls.bind(this),this._startAd.bind(this)],n)};f.prototype._handshake=function g(t,e,n){t.handshakeVersion(this.options.VPAID_VERSION,function(a,s){if(a){return n(a,t,e)}if(s&&r(s)){return n(null,t,e)}return n(new i('on VPAIDIntegrator._handshake, unsupported version "'+s+'"'),t,e)});function r(t){var e=a(t);return e>=1&&e<=2}function a(t){var e=t.split(".");return parseInt(e[0],10)}};f.prototype._initAd=function(t,e,n){var i=this.player.el().querySelector(".vjs-tech");var r=l.getDimension(i);t.initAd(r.width,r.height,this.VIEW_MODE.NORMAL,-1,{AdParameters:e.adParameters||""},function(i){n(i,t,e)})};f.prototype._createVASTTracker=function(t,e){return new a(t,e)};f.prototype._setupEvents=function(t,e,n){var i=t.options.src;var r=this._createVASTTracker(i,e);var a=this.player;var o=this;t.on("AdSkipped",function(){a.trigger("vpaid.AdSkipped");r.trackSkip()});t.on("AdImpression",function(){a.trigger("vpaid.AdImpression");r.trackImpressions()});t.on("AdStarted",function(){a.trigger("vpaid.AdStarted");r.trackCreativeView();u()});t.on("AdVideoStart",function(){a.trigger("vpaid.AdVideoStart");r.trackStart();u()});t.on("AdPlaying",function(){a.trigger("vpaid.AdPlaying");r.trackResume();u()});t.on("AdPaused",function(){a.trigger("vpaid.AdPaused");r.trackPause();c()});function u(){if(o._adUnit&&o._adUnit.isPaused()){o._adUnit._paused=false}a.trigger("play")}function c(){if(o._adUnit){o._adUnit._paused=true}a.trigger("pause")}t.on("AdVideoFirstQuartile",function(){a.trigger("vpaid.AdVideoFirstQuartile");r.trackFirstQuartile()});t.on("AdVideoMidpoint",function(){a.trigger("vpaid.AdVideoMidpoint");r.trackMidpoint()});t.on("AdVideoThirdQuartile",function(){a.trigger("vpaid.AdVideoThirdQuartile");r.trackThirdQuartile()});t.on("AdVideoComplete",function(){a.trigger("vpaid.AdVideoComplete");r.trackComplete()});t.on("AdClickThru",function(n){a.trigger("vpaid.AdClickThru");var i=n.url;var o=n.playerHandles;var u=d.isNotEmptyString(i)?i:l(e.clickThrough);r.trackClick();if(o&&u){window.open(u,"_blank")}function l(e){var n={ASSETURI:t.options.src,CONTENTPLAYHEAD:0};return e?s.parseURLMacro(e,n):null}});t.on("AdUserAcceptInvitation",function(){a.trigger("vpaid.AdUserAcceptInvitation");r.trackAcceptInvitation();r.trackAcceptInvitationLinear()});t.on("AdUserClose",function(){a.trigger("vpaid.AdUserClose");r.trackClose();r.trackCloseLinear()});t.on("AdUserMinimize",function(){a.trigger("vpaid.AdUserMinimize");r.trackCollapse()});t.on("AdError",function(){a.trigger("vpaid.AdError");r.trackErrorWithCode(901)});t.on("AdVolumeChange",function(){a.trigger("vpaid.AdVolumeChange");var e=a.volume();t.getAdVolume(function(t,n){if(n===0&&e>0){r.trackMute()}if(n>0&&e===0){r.trackUnmute()}a.volume(n)})});var f=h.bind(this,a,t,this.VIEW_MODE);var p=d.throttle(f,100);var v=this.settings.autoResize;if(v){l.addEventListener(window,"resize",p);l.addEventListener(window,"orientationchange",p)}a.on("vast.resize",f);a.on("vpaid.pauseAd",g);a.on("vpaid.resumeAd",m);a.one("vpaid.adEnd",function(){a.off("vast.resize",f);a.off("vpaid.pauseAd",g);a.off("vpaid.resumeAd",m);if(v){l.removeEventListener(window,"resize",p);l.removeEventListener(window,"orientationchange",p)}});n(null,t,e);function g(){t.pauseAd(d.noop)}function m(){t.resumeAd(d.noop)}};f.prototype._addSkipButton=function(t,e,n){var i;var r=this.player;t.on("AdSkippableStateChange",a);c.once(r,["vast.adEnd","vast.adsCancel"],o);n(null,t,e);function a(){r.trigger("vpaid.AdSkippableStateChange");t.getAdSkippableState(function(t,e){if(e){if(!i){s(r)}}else{o(r)}})}function s(t){i=u(t);t.el().appendChild(i)}function o(){l.remove(i);i=null}function u(){var e=window.document.createElement("div");l.addClass(e,"vast-skip-button");l.addClass(e,"enabled");e.innerHTML="Skip ad";e.onclick=function(e){t.skipAd(d.noop);if(window.Event.prototype.stopPropagation!==undefined){e.stopPropagation()}else{return false}};return e}};f.prototype._linkPlayerControls=function(t,e,n){var i=this;r(this.player,t);a(this.player,t,this.VIEW_MODE);n(null,t,e);function r(t,e){t.on("volumechange",n);e.on("AdVolumeChange",i);t.one("vpaid.adEnd",function(){t.off("volumechange",n)});function n(){var n=t.muted()?0:t.volume();e.setAdVolume(n,p)}function i(){t.trigger("vpaid.AdVolumeChange");e.getAdVolume(function(e,n){if(e){p(e)}else{t.volume(n)}})}}function a(t,e,n){var r=h.bind(i,t,e,n);t.on("fullscreenchange",r);t.one("vpaid.adEnd",function(){t.off("fullscreenchange",r)})}};f.prototype._startAd=function(t,e,n){var i=this.player;t.startAd(function(r){if(!r){i.trigger("vast.adStart")}n(r,t,e)})};f.prototype._finishPlaying=function(t,e,n){var r=this.player;t.on("AdStopped",function(){r.trigger("vpaid.AdStopped");a(null)});t.on("AdError",function(t){var e=t?t.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";a(new i(e))});function a(i){n(i,t,e)}};f.prototype._trackError=function m(t,e){s.track(t.errorURLMacros,{ERRORCODE:e||901})};function h(t,e,n){var i=t.el().querySelector(".vjs-tech");var r=l.getDimension(i);var a=t.isFullscreen()?n.FULLSCREEN:n.NORMAL;e.resizeAd(r.width,r.height,a,p)}function p(t){if(t&&console&&console.log){console.log("ERROR: "+t.message,t)}}e.exports=f},{"../../utils/async":39,"../../utils/dom":40,"../../utils/playerUtils":42,"../../utils/utilityFunctions":44,"../vast/VASTError":22,"../vast/VASTResponse":24,"../vast/VASTTracker":25,"../vast/vastUtil":29,"./VPAIDAdUnitWrapper":30}],34:[function(t,e,n){"use strict";var i=t("../../utils/dom");var r=document.createElement("div");r.className="vjs-ads-label vjs-control vjs-label-hidden";r.innerHTML="Advertisement";var a=function(t){return{init:function e(n,a){a.el=r;t.call(this,n,a);setTimeout(function(){var t=n.controlBar&&(n.controlBar.getChild("timerControls")||n.controlBar.getChild("currentTimeDisplay"));if(t){n.controlBar.el().insertBefore(r,t.el())}i.removeClass(r,"vjs-label-hidden")},0)},el:function n(){return r}}};e.exports=a},{"../../utils/dom":40}],35:[function(t,e,n){"use strict";var i=videojs.getComponent("Component");var r=t("./ads-label")(i);videojs.registerComponent("AdsLabel",videojs.extend(i,r))},{"./ads-label":34}],36:[function(t,e,n){"use strict";var i=document.createElement("div");var r=function(t){return{init:function e(n,r){r.el=i;i.className="vjs-black-poster";t.call(this,n,r);var a=n.getChild("posterImage");setTimeout(function(){if(a&&n&&n.el()){n.el().insertBefore(i,a.el())}},0)},el:function n(){return i}}};e.exports=r},{}],37:[function(t,e,n){"use strict";var i=videojs.getComponent("Component");var r=t("./black-poster")(i);videojs.registerComponent("BlackPoster",videojs.extend(i,r))},{"./black-poster":36}],38:[function(t,e,n){"use strict";var i=t("../ads/vast/VASTClient");var r=t("../ads/vast/VASTError");var a=t("../ads/vast/vastUtil");var s=t("../ads/vast/VASTIntegrator");var o=t("../ads/vpaid/VPAIDIntegrator");var u=t("../utils/async");var l=t("../utils/dom");var c=t("../utils/playerUtils");var d=t("../utils/utilityFunctions");e.exports=function f(t){var e;var n=this;var f=new i;var h=false;var p={timeout:500,iosPrerollCancelTimeout:2e3,adCancelTimeout:3e3,playAdAlways:false,adsEnabled:true,autoResize:true,vpaidFlashLoaderPath:"/VPAIDFlash.swf"};var v=d.extend({},p,t||{});if(d.isUndefined(v.adTagUrl)&&d.isDefined(v.url)){v.adTagUrl=v.url}if(d.isString(v.adTagUrl)){v.adTagUrl=d.echoFn(v.adTagUrl)}if(d.isDefined(v.adTagXML)&&!d.isFunction(v.adTagXML)){return k(new r("on VideoJS VAST plugin, the passed adTagXML option does not contain a function"))}if(!d.isDefined(v.adTagUrl)&&!d.isFunction(v.adTagXML)){return k(new r("on VideoJS VAST plugin, missing adTagUrl on options object"))}a.runFlashSupportCheck(v.vpaidFlashLoaderPath);c.prepareForAds(n);if(v.playAdAlways){n.on("vast.contentEnd",function(){setTimeout(function(){n.trigger("vast.reset")},0)})}n.on("vast.firstPlay",g);n.on("vast.reset",function(){e=null;m()});n.vast={isEnabled:function(){return v.adsEnabled},enable:function(){v.adsEnabled=true},disable:function(){v.adsEnabled=false}};return n.vast;function g(){c.removeNativePoster(n);c.once(n,["vast.adsCancel","vast.adEnd"],function(){t();i()});u.waterfall([s,o,p,y],function(t,e){if(t){k(t,e)}else{n.trigger("vast.adEnd")}});function t(){if(n.vast&&n.vast.adUnit){n.vast.adUnit=null}}function i(){a();if(e){c.restorePlayerSnapshot(n,e);e=null}}function a(){c.once(n,["playing","vast.reset","vast.firstPlay"],function(t){if(t.type!=="playing"){return}n.trigger("vast.contentStart");c.once(n,["ended","vast.reset","vast.firstPlay"],function(t){if(t.type==="ended"){n.trigger("vast.contentEnd")}})})}function s(t){if(v.adsEnabled){return t(null)}t(new r("Ads are not enabled"))}function o(t){if(f()){e=c.getPlayerSnapshot(n);n.pause();g();if(n.paused()){t(null)}else{c.once(n,["playing"],function(){n.pause();t(null)})}}else{t(new r("video content has been playing before preroll ad"))}}function f(){return!d.isIPhone()||n.currentTime()<=v.iosPrerollCancelTimeout}function p(t){var e;h=false;e=setTimeout(function(){k(new r("timeout while waiting for the video to start playing",402))},v.adCancelTimeout);c.once(n,["vast.adStart","vast.adsCancel"],i);function i(){if(e){clearTimeout(e);e=null}}t(null)}function g(){l.addClass(n.el(),"vjs-vast-ad-loading");c.once(n,["vast.adStart","vast.adsCancel"],m)}function m(){setTimeout(function(){l.removeClass(n.el(),"vjs-vast-ad-loading")},100)}}function m(){n.trigger("vast.adsCancel");h=true}function y(t){u.waterfall([A,_],t)}function A(t){f.getVASTResponse(v.adTagUrl?v.adTagUrl():v.adTagXML,t)}function _(t,e){if(h){return}var i=E(t)?new o(n,v):new s(n);var r=false;c.once(n,["vast.adStart","vast.adsCancel"],function(t){if(t.type==="vast.adStart"){a()}});c.once(n,["vast.adEnd","vast.adsCancel"],u);if(d.isIDevice()){l()}n.vast.vastResponse=t;n.vast.adUnit=i.playAd(t,e);function a(){if(r||n.controlBar.getChild("AdsLabel")){return}n.controlBar.addChild("AdsLabel")}function u(){n.controlBar.removeChild("AdsLabel");r=true}function l(){var t=3;var e=0;var i=0;n.on("timeupdate",a);n.on("ended",r);c.once(n,["vast.adEnd","vast.adsCancel","vast.adError"],s);function r(){if(n.duration()-e>t){n.pause(true);n.play(true);n.currentTime(e)}}function a(){var r=n.currentTime();var a=Math.abs(r-e);if(a>t){i+=1;if(i>=2){n.pause(true)}n.currentTime(e)}else{e=r}}function s(){n.off("timeupdate",a);n.off("ended",r)}}}function k(t,e){n.trigger({type:"vast.adError",error:t});m();if(console&&console.log){console.log("AD ERROR:",t.message,t,e)}}function E(t){var e,n;var i=t.mediaFiles;for(e=0,n=i.length;e<n;e++){if(a.isVPAID(i[e])){return true}}return false}}},{"../ads/vast/VASTClient":21,"../ads/vast/VASTError":22,"../ads/vast/VASTIntegrator":23,"../ads/vast/vastUtil":29,"../ads/vpaid/VPAIDIntegrator":33,"../utils/async":39,"../utils/dom":40,"../utils/playerUtils":42,"../utils/utilityFunctions":44}],39:[function(t,e,n){var i=t("./utilityFunctions");var r={};r.setImmediate=function(t){setTimeout(t,0)};r.iterator=function(t){var e=function(n){var i=function(){if(t.length){t[n].apply(null,arguments)}return i.next()};i.next=function(){return n<t.length-1?e(n+1):null};return i};return e(0)};r.waterfall=function(t,e){e=e||function(){};if(!i.isArray(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length){return e()}var a=function(t){return function(n){if(n){e.apply(null,arguments);e=function(){}}else{var i=Array.prototype.slice.call(arguments,1);var s=t.next();if(s){i.push(a(s))}else{i.push(e)}r.setImmediate(function(){t.apply(null,i)})}}};a(r.iterator(t))()};r.when=function(t,e){if(!i.isFunction(e)){throw new Error("async.when error: missing callback argument")}var n=i.isFunction(t)?t:function(){return!!t};return function(){var t=i.arrayLikeObjToArray(arguments);var r=t.pop();if(n.apply(null,t)){return e.apply(this,arguments)}t.unshift(null);return r.apply(null,t)}};e.exports=r},{"./utilityFunctions":44}],40:[function(t,e,n){"use strict";var i=t("./utilityFunctions");var r={};r.isVisible=function a(t){var e=window.getComputedStyle(t);return e.visibility!=="hidden"};r.isHidden=function s(t){var e=window.getComputedStyle(t);return e.display==="none"};r.isShown=function o(t){return!r.isHidden(t)};r.hide=function u(t){t.__prev_style_display_=t.style.display;t.style.display="none"};r.show=function l(t){if(r.isHidden(t)){t.style.display=t.__prev_style_display_}t.__prev_style_display_=undefined};r.hasClass=function c(t,e){var n,r,a;if(i.isNotEmptyString(e)){if(t.classList){return t.classList.contains(e)}n=i.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];e=e||"";for(r=0,a=n.length;r<a;r+=1){if(n[r]===e){return true}}}return false};r.addClass=function(t,e){var n;if(i.isNotEmptyString(e)){if(t.classList){return t.classList.add(e)}n=i.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];if(i.isString(e)&&i.isNotEmptyString(e.replace(/\s+/,""))){n.push(e);t.setAttribute("class",n.join(" "))}}};r.removeClass=function(t,e){var n;if(i.isNotEmptyString(e)){if(t.classList){return t.classList.remove(e)}n=i.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];var r=[];var a,s;if(i.isString(e)&&i.isNotEmptyString(e.replace(/\s+/,""))){for(a=0,s=n.length;a<s;a+=1){if(e!==n[a]){r.push(n[a])}}t.setAttribute("class",r.join(" "))}}};r.addEventListener=function d(t,e,n){if(i.isArray(t)){i.forEach(t,function(t){r.addEventListener(t,e,n)});return}if(i.isArray(e)){i.forEach(e,function(e){r.addEventListener(t,e,n)});return}if(t.addEventListener){t.addEventListener(e,n,false)}else if(t.attachEvent){t.attachEvent("on"+e,n)}};r.removeEventListener=function f(t,e,n){if(i.isArray(t)){i.forEach(t,function(t){r.removeEventListener(t,e,n)});return}if(i.isArray(e)){i.forEach(e,function(e){r.removeEventListener(t,e,n)});return}if(t.removeEventListener){t.removeEventListener(e,n,false)}else if(t.detachEvent){t.detachEvent("on"+e,n)}else{t["on"+e]=null}};r.dispatchEvent=function h(t,e){if(t.dispatchEvent){t.dispatchEvent(e)}else{t.fireEvent("on"+e.eventType,e)}};r.isDescendant=function p(t,e){var n=e.parentNode;while(n!==null){if(n===t){return true}n=n.parentNode}return false};r.getTextContent=function v(t){return t.textContent||t.text};r.prependChild=function g(t,e){if(e.parentNode){e.parentNode.removeChild(e)}return t.insertBefore(e,t.firstChild)};r.remove=function m(t){if(t&&t.parentNode){t.parentNode.removeChild(t)}};r.isDomElement=function y(t){return t instanceof Element};r.click=function(t,e){r.addEventListener(t,"click",e)};r.once=function(t,e,n){function i(){n.apply(null,arguments);r.removeEventListener(t,e,i)}r.addEventListener(t,e,i)};r.getDimension=function A(t){var e;if(!i.isOldIE()&&t.getBoundingClientRect){e=t.getBoundingClientRect();return{width:e.width,height:e.height}}return{width:t.offsetWidth,height:t.offsetHeight}};e.exports=r},{"./utilityFunctions":44}],41:[function(t,e,n){"use strict";var i=t("./urlUtils");var r=t("./utilityFunctions");function a(t){this.message="HttpRequest Error: "+(t||"")}a.prototype=new Error;a.prototype.name="HttpRequest Error";function s(t){if(!r.isFunction(t)){throw new a("Missing XMLHttpRequest factory method")}this.createXhr=t}s.prototype.run=function(t,e,n,s){c(e,n,s);var o,u;var l=this.createXhr();s=s||{};o=r.isNumber(s.timeout)?s.timeout:0;l.open(t,i.urlParts(e).href,true);if(s.headers){d(l,s.headers)}if(s.withCredentials){l.withCredentials=true}l.onload=function(){var t,e,i;if(!l.getAllResponseHeaders){l.getAllResponseHeaders=function(){return null}}if(!l.status){l.status=200}if(r.isDefined(u)){clearTimeout(u);u=undefined}t=l.statusText||"";e="response"in l?l.response:l.responseText;i=l.status===1223?204:l.status;n(i,e,l.getAllResponseHeaders(),t)};l.onerror=f;l.onabort=f;l.send();if(o>0){u=setTimeout(function(){l&&l.abort()},o)}function c(t,e,n){if(!r.isString(t)||r.isEmptyString(t)){throw new a("Invalid url '"+t+"'")}if(!r.isFunction(e)){throw new a("Invalid handler '"+e+"' for the http request")}if(r.isDefined(n)&&!r.isObject(n)){throw new a("Invalid options map '"+n+"'")}}function d(t,e){r.forEach(e,function(e,n){if(r.isDefined(e)){t.setRequestHeader(n,e)}})}function f(){n(-1,null,null,"")}};s.prototype.get=function(t,e,n){this.run("GET",t,i,n);function i(t,n,i,s){if(r(t)){e(null,n,t,i,s)}else{e(new a(s),n,t,i,s)}}function r(t){return 200<=t&&t<300}};function o(){var t=new XMLHttpRequest;if(!("withCredentials"in t)){t=new XDomainRequest}return t}var u=new s(o);e.exports={http:u,HttpRequest:s,HttpRequestError:a,createXhr:o}},{"./urlUtils":43,"./utilityFunctions":44}],42:[function(t,e,n){"use strict";var i=t("./dom");var r=t("./utilityFunctions");var a={};a.getPlayerSnapshot=function s(t){var e=t.el().querySelector(".vjs-tech");var n={ended:t.ended(),src:t.currentSrc(),currentTime:t.currentTime(),type:t.currentType(),playing:!t.paused(),suppressedTracks:i(t)};if(e){n.nativePoster=e.poster;n.style=e.getAttribute("style")}return n;function i(t){var e=t.remoteTextTracks?t.remoteTextTracks():[];if(e&&r.isArray(e.tracks_)){e=e.tracks_}if(!r.isArray(e)){e=[]}var n=[];e.forEach(function(t){n.push({track:t,mode:t.mode});t.mode="disabled"});return n}};a.restorePlayerSnapshot=function o(t,e){var n=t.el().querySelector(".vjs-tech");var i=20;if(e.nativePoster){n.poster=e.nativePoster}if("style"in e){n.setAttribute("style",e.style||"")}if(s(t,e)){t.one("contentloadedmetadata",o);t.one("canplay",u);r();t.src({src:e.src,type:e.type});t.load()}else{o();if(e.playing){t.play()}}function r(){var e=setTimeout(function(){t.trigger("canplay")},1e3);t.one("canplay",function(){clearTimeout(e)})}function s(t,e){if(t.src()){return t.src()!==e.src}return t.currentSrc()!==e.src}function o(){var t=e.suppressedTracks;t.forEach(function(t){t.track.mode=t.mode})}function u(){if(!a.isReadyToResume(t)&&i--){setTimeout(u,50)}else{try{if(t.currentTime()!==e.currentTime){if(e.playing){t.one("seeked",function(){t.play()})}t.currentTime(e.currentTime)}else if(e.playing){t.play()}}catch(n){videojs.log.warn("Failed to resume the content after an advertisement",n)}}}};a.isReadyToResume=function(t){if(t.readyState()>1){return true}if(t.seekable()===undefined){return true}if(t.seekable().length>0){return true}return false};a.prepareForAds=function(t){var e=t.addChild("blackPoster");var n=true;var a;s();t.on("play",u);t.on("vast.reset",l);t.on("vast.firstPlay",f);t.on("error",p);t.on("vast.adStart",p);t.on("vast.adsCancel",p);t.on("vast.adError",p);t.on("vast.adStart",v);t.on("vast.adEnd",g);t.on("vast.adsCancel",g);function s(){var e=t.play;t.play=function(n){var i=this;if(c()){s()}else{u(n)}return this;function s(){if(!r.isIPhone()){a=d();t.muted(true)}e.apply(i,arguments)}function u(n){if(o()&&!n){t.vast.adUnit.resumeAd()}else{e.apply(i,arguments)}}};var n=t.pause;t.pause=function(e){if(o()&&!e){t.vast.adUnit.pauseAd()}else{n.apply(this,arguments)}return this};var i=t.paused;t.paused=function(e){if(o()&&!e){return t.vast.adUnit.isPaused()}return i.apply(this,arguments)}}function o(){return t.vast&&t.vast.adUnit}function u(){if(c()){n=false;t.trigger("vast.firstPlay")}}function l(){n=true;e.show();f()}function c(){return n}function d(){return{muted:t.muted(),volume:t.volume()}}function f(){if(a){t.currentTime(0);h(a);a=null}}function h(e){if(r.isObject(e)){t.volume(e.volume);t.muted(e.muted)}}function p(){if(!i.hasClass(e.el(),"vjs-hidden")){e.hide()}}function v(){i.addClass(t.el(),"vjs-ad-playing")}function g(){i.removeClass(t.el(),"vjs-ad-playing")}};a.removeNativePoster=function(t){var e=t.el().querySelector(".vjs-tech");if(e){e.removeAttribute("poster")}};a.once=function u(t,e,n){function i(){n.apply(null,arguments);e.forEach(function(e){t.off(e,i)})}e.forEach(function(e){t.on(e,i)})};e.exports=a},{"./dom":40,"./utilityFunctions":44}],43:[function(t,e,n){"use strict";var i=t("./utilityFunctions");var r=document.createElement("a");var a=document.documentMode;function s(t){var e=t;if(a){r.setAttribute("href",e);e=r.href}r.setAttribute("href",e);return{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:i.isNotEmptyString(r.port)?r.port:80,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}function o(t,e){var n,r;e=i.isFunction(e)?e:function(){return true};t=t.trim().replace(/^\?/,"");n=t.split("&");r={};i.forEach(n,function(t){var n,i,a;if(t!==""){n=t.split("=");i=n[0];a=n[1];if(e(i,a)){r[i]=a}}});return r}function u(t){var e=[];i.forEach(t,function(t,n){e.push(n+"="+t)});return e.join("&")}e.exports={urlParts:s,queryStringToObj:o,objToQueryString:u}},{"./utilityFunctions":44}],44:[function(t,e,n){"use strict";var i=1;var r=/[A-Z]/g;var a=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i;var s=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function o(){}function u(t){return t===null}function l(t){return t!==undefined}function c(t){return t===undefined}function d(t){return typeof t==="object"}function f(t){return typeof t==="function"}function h(t){return typeof t==="number"}function p(t){return j.isObject(t)&&t.window===t}function v(t){return Object.prototype.toString.call(t)==="[object Array]"}function g(t){if(t===null||j.isWindow(t)||j.isFunction(t)||j.isUndefined(t)){return false}var e=t.length;if(t.nodeType===i&&e){return true}return j.isString(t)||j.isArray(t)||e===0||typeof e==="number"&&e>0&&e-1 in t}function m(t){return typeof t==="string"}function y(t){return j.isString(t)&&t.length===0}function A(t){return j.isString(t)&&t.length!==0}function _(t){return Array.prototype.slice.call(t)}function k(t,e,n){var i,r;if(t){if(f(t)){for(i in t){if(i!=="prototype"&&i!=="length"&&i!=="name"&&(!t.hasOwnProperty||t.hasOwnProperty(i))){e.call(n,t[i],i,t)}}}else if(v(t)){var a=typeof t!=="object";for(i=0,r=t.length;i<r;i++){if(a||i in t){e.call(n,t[i],i,t)}}}else if(t.forEach&&t.forEach!==k){t.forEach(e,n,t)}else{for(i in t){if(t.hasOwnProperty(i)){e.call(n,t[i],i,t)}}}}return t}function E(t,e){e=e||"_";return t.replace(r,function(t,n){return(n?e:"")+t.toLowerCase()})}function T(t){if(!j.isString(t)){return false}return a.test(t.trim())}function w(t){var e,n,i;for(n=1;n<arguments.length;n++){e=arguments[n];for(i in e){if(e.hasOwnProperty(i)){if(d(t[i])&&!u(t[i])&&d(e[i])){t[i]=w({},t[i],e[i])}else{t[i]=e[i]}}}}return t}function b(t){return t.charAt(0).toUpperCase()+t.slice(1)}function S(t){return t.charAt(0).toLowerCase()+t.slice(1)}function V(t,e){var n=[];t.forEach(function(t,i){var r=e(t,i);if(j.isDefined(r)){n.push(r)}});return n}function C(t,e){var n=t+"";e=j.isNumber(e)?e:0;t=j.isNumber(t)?t:parseInt(t,10);if(j.isNumber(t)&&!isNaN(t)){n=t+"";while(n.length<e){n="0"+n}return n}return NaN+""}function I(t,e){var n=(new Date).getTime()-(e+1);return function(){var i=(new Date).getTime();if(i-n>=e){n=i;t.apply(this,arguments)}}}function F(t,e){var n;return function(){if(n){clearTimeout(n)}n=setTimeout(function(){t.apply(this,arguments);n=undefined},e)}}function L(t,e,n){var i=e(t);for(var r=0;r<i.length;r++){if(n(i[r])){return i[r]}else{var a=L(i[r],e,n);if(a){return a}}}}function U(t){return function(){return t}}function D(t){if(j.isNumber(t)){t=t+""}if(!j.isString(t)){return false}return s.test(t.trim())}function P(){var t=j.getInternetExplorerVersion(navigator);if(t===-1){return false}return t<10}function M(t){var e=-1;if(t.appName=="Microsoft Internet Explorer"){var n=t.userAgent;var i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");var r=i.exec(n);if(r!==null){e=parseFloat(r[1])}}return e}function x(){return/iP(hone|ad)/.test(j._UA)}function R(){return/iP(hone|ad|od)|Android|Windows Phone/.test(j._UA)}function O(){return/iP(hone|od)/.test(j._UA)}function N(){return/Android/.test(j._UA)}var j={_UA:navigator.userAgent,noop:o,isNull:u,isDefined:l,isUndefined:c,isObject:d,isFunction:f,isNumber:h,isWindow:p,isArray:v,isArrayLike:g,isString:m,isEmptyString:y,isNotEmptyString:A,arrayLikeObjToArray:_,forEach:k,snake_case:E,isValidEmail:T,extend:w,capitalize:b,decapitalize:S,transformArray:V,toFixedDigits:C,throttle:I,debounce:F,treeSearch:L,echoFn:U,isISO8601:D,isOldIE:P,getInternetExplorerVersion:M,isIDevice:x,isMobile:R,isIPhone:O,isAndroid:N};e.exports=j},{}],45:[function(t,e,n){"use strict";var i=t("./utilityFunctions");var r={};r.strToXMLDoc=function a(t){if(typeof window.DOMParser==="undefined"){var e=new ActiveXObject("Microsoft.XMLDOM");e.async=false;e.loadXML(t);return e}return n(t);function n(t){var e=new DOMParser;var n;try{n=e.parseFromString(t,"application/xml");if(r(n)||i.isEmptyString(t)){throw new Error}}catch(a){throw new Error("xml.strToXMLDOC: Error parsing the string: '"+t+"'")}return n}function r(t){try{var e=new DOMParser,n=e.parseFromString("INVALID","text/xml"),i=n.getElementsByTagName("parsererror")[0].namespaceURI;if(i==="http://www.w3.org/1999/xhtml"){return t.getElementsByTagName("parsererror").length>0}return t.getElementsByTagNameNS(i,"parsererror").length>0}catch(r){}}};r.parseText=function s(t){if(/^\s*$/.test(t)){return null}if(/^(?:true|false)$/i.test(t)){return t.toLowerCase()==="true"}if(isFinite(t)){return parseFloat(t)}if(i.isISO8601(t)){return new Date(t)}return t.trim()};r.JXONTree=function o(t){var e=r.parseText;if(t.documentElement){return new r.JXONTree(t.documentElement)}if(t.hasChildNodes()){var n="";for(var a,s,o,u=0;u<t.childNodes.length;u++){a=t.childNodes.item(u);if((a.nodeType-1|1)===3){n+=a.nodeType===3?a.nodeValue.trim():a.nodeValue}else if(a.nodeType===1&&!a.prefix){s=i.decapitalize(a.nodeName);o=new r.JXONTree(a);if(this.hasOwnProperty(s)){if(this[s].constructor!==Array){this[s]=[this[s]]}this[s].push(o)}else{this[s]=o}}}if(n){this.keyValue=e(n)}}var l=typeof t.hasAttributes==="undefined"?t.attributes.length>0:t.hasAttributes();if(l){var c;for(var d=0;d<t.attributes.length;d++){c=t.attributes.item(d);this["@"+i.decapitalize(c.name)]=e(c.value.trim())}}};r.JXONTree.prototype.attr=function(t){return this["@"+i.decapitalize(t)]};r.toJXONTree=function u(t){var e=r.strToXMLDoc(t);return new r.JXONTree(e)};r.keyValue=function l(t){if(t){return t.keyValue}return undefined};r.attr=function c(t,e){if(t){return t["@"+i.decapitalize(e)]}return undefined};r.encode=function d(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};r.decode=function f(t){return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};e.exports=r},{"./utilityFunctions":44}],46:[function(t,e,n){"use strict";t("./plugin/components/ads-label_5");t("./plugin/components/black-poster_5");var i=t("./plugin/videojs.vast.vpaid");videojs.plugin("vastClient",i)},{"./plugin/components/ads-label_5":35,"./plugin/components/black-poster_5":37,"./plugin/videojs.vast.vpaid":38}]},{},[46]);
//# sourceMappingURL=videojs_5.vast.vpaid.min.js.map
