(function t(e,i,n){function r(o,s){if(!i[o]){if(!e[o]){var u=typeof require=="function"&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){var i=e[o][1][t];return r(i?i:t)},l,l.exports,t,e,i,n)}return i[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<n.length;o++)r(n[o]);return r})({1:[function(t,e,i){"use strict";var n=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];var r=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"];var a=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"];var o=["setAdVolume"];function s(t,e,i){}s.prototype.handshakeVersion=function(t,e){};s.prototype.initAd=function(t,e,i,n,r,a,o){};s.prototype.startAd=function(t){};s.prototype.stopAd=function(t){};s.prototype.skipAd=function(t){};s.prototype.resizeAd=function(t,e,i,n){};s.prototype.pauseAd=function(t){};s.prototype.resumeAd=function(t){};s.prototype.expandAd=function(t){};s.prototype.collapseAd=function(t){};s.prototype.subscribe=function(t,e,i){};s.prototype.unsubscribe=function(t,e){};s.prototype.getAdLinear=function(t){};s.prototype.getAdWidth=function(t){};s.prototype.getAdHeight=function(t){};s.prototype.getAdExpanded=function(t){};s.prototype.getAdSkippableState=function(t){};s.prototype.getAdRemainingTime=function(t){};s.prototype.getAdDuration=function(t){};s.prototype.getAdVolume=function(t){};s.prototype.getAdCompanions=function(t){};s.prototype.getAdIcons=function(t){};s.prototype.setAdVolume=function(t,e){};c(s,"METHODS",n);c(s,"GETTERS",a);c(s,"SETTERS",o);c(s,"EVENTS",r);var u=n.filter(function(t){return["skipAd"].indexOf(t)===-1});c(s,"checkVPAIDInterface",function l(t){var e=u.every(function(e){return typeof t[e]==="function"});return e});e.exports=s;function c(t,e,i){Object.defineProperty(t,e,{writable:false,configurable:false,value:i})}},{}],2:[function(t,e,i){"use strict";var n=t("./IVPAIDAdUnit");var r=t("./subscriber");var a=n.checkVPAIDInterface;var o=t("./utils");var s=n.METHODS;var u="AdError";var c="AdClickThru";var l=n.EVENTS.filter(function(t){return t!=c});function d(t,e,i,n){this._isValid=a(t);if(this._isValid){this._creative=t;this._el=e;this._videoEl=i;this._iframe=n;this._subscribers=new r;o.setFullSizeStyle(e);f.call(this)}}d.prototype=Object.create(n.prototype);d.prototype.isValidVPAIDAd=function g(){return this._isValid};n.METHODS.forEach(function(t){var e=["subscribe","unsubscribe","initAd"];if(e.indexOf(t)!==-1)return;d.prototype[t]=function(){var e=n.prototype[t].length;var i=Array.prototype.slice.call(arguments);var r=e===i.length?i.pop():undefined;setTimeout(function(){var e,n=null;try{e=this._creative[t].apply(this._creative,i)}catch(a){n=a}v(r,this._subscribers,n,e)}.bind(this),0)}});d.prototype.initAd=function m(t,e,i,n,r,a,s){r=r||{};a=o.extend({slot:this._el,videoSlot:this._videoEl},a||{});setTimeout(function(){var o;try{this._creative.initAd(t,e,i,n,r,a)}catch(u){o=u}v(s,this._subscribers,o)}.bind(this),0)};d.prototype.subscribe=function y(t,e,i){this._subscribers.subscribe(e,t,i)};d.prototype.unsubscribe=function A(t,e){this._subscribers.unsubscribe(e,t)};d.prototype.on=d.prototype.subscribe;d.prototype.off=d.prototype.unsubscribe;n.GETTERS.forEach(function(t){d.prototype[t]=function(e){setTimeout(function(){var i,n=null;try{i=this._creative[t]()}catch(r){n=r}v(e,this._subscribers,n,i)}.bind(this),0)}});d.prototype.setAdVolume=function T(t,e){setTimeout(function(){var i,n=null;try{this._creative.setAdVolume(t);i=this._creative.getAdVolume()}catch(r){n=r}if(!n){n=o.validate(i===t,"failed to apply volume: "+t)}v(e,this._subscribers,n,i)}.bind(this),0)};d.prototype._destroy=function E(){this.stopAd();this._subscribers.unsubscribeAll()};function f(){l.forEach(function(t){this._creative.subscribe(h.bind(this,t),t)}.bind(this));this._creative.subscribe(p.bind(this),c);if(this._videoEl){var t=this._iframe.contentDocument.documentElement;var e=this._videoEl;t.addEventListener("click",function(i){if(i.target===t){e.click()}})}}function p(t,e,i){this._subscribers.triggerSync(c,{url:t,id:e,playerHandles:i})}function h(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}function v(t,e,i,n){if(t){t(i,n)}else if(i){e.trigger(u,i)}}e.exports=d},{"./IVPAIDAdUnit":1,"./subscriber":4,"./utils":5}],3:[function(t,e,i){"use strict";var n=t("./utils");var r=n.unique("vpaidIframe");var a=t("./VPAIDAdUnit");var o="<!DOCTYPE html>"+'<html lang="en">'+'<head><meta charset="UTF-8"></head>'+'<body style="margin:0;padding:0"><div class="ad-element"></div>'+'<script type="text/javascript" src="{{iframeURL_JS}}"></script>'+'<script type="text/javascript">'+'window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');'+"</script>"+"</body>"+"</html>";var s="AdStopped";function u(t,e,i,a){i=i||{};this._id=r();this._destroyed=false;this._frameContainer=n.createElementInEl(t,"div");this._videoEl=e;this._vpaidOptions=a||{timeout:1e4};this._templateConfig={template:i.template||o,extraOptions:i.extraOptions||{}}}u.prototype.destroy=function m(){if(this._destroyed){return}this._destroyed=true;d.call(this)};u.prototype.isDestroyed=function y(){return this._destroyed};u.prototype.loadAdUnit=function A(t,e){v.call(this);d.call(this);var i=this;var r=n.createIframeWithContent(this._frameContainer,this._templateConfig.template,n.extend({iframeURL_JS:t,iframeID:this.getID(),origin:g()},this._templateConfig.extraOptions));this._frame=r;this._onLoad=n.callbackTimeout(this._vpaidOptions.timeout,o.bind(this),u.bind(this));window.addEventListener("message",this._onLoad);function o(t){if(t.origin!==g())return;var r=JSON.parse(t.data);if(r.id!==i.getID())return;var o,u,c;if(!i._frame.contentWindow){u="the iframe is not anymore in the DOM tree"}else{c=i._frame.contentWindow.getVPAIDAd;u=n.validate(typeof c==="function","the ad didn't return a function to create an ad")}if(!u){var d=i._frame.contentWindow.document.querySelector(".ad-element");o=new a(c(),d,i._videoEl,i._frame);o.subscribe(s,l.bind(i));u=n.validate(o.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}i._adUnit=o;p.call(i);e(u,u?null:o);return true}function u(){e("timeout",null)}};u.prototype.unloadAdUnit=function T(){d.call(this)};u.prototype.getID=function(){return this._id};function c(t){var e=this[t];if(e){e.remove();delete this[t]}}function l(){f.call(this);delete this._adUnit}function d(){f.call(this);h.call(this)}function f(){c.call(this,"_frame");p.call(this)}function p(){if(this._onLoad){window.removeEventListener("message",this._onLoad);n.clearCallbackTimeout(this._onLoad);delete this._onLoad}}function h(){if(this._adUnit){this._adUnit.stopAd();delete this._adUnit}}function v(){if(this._destroyed){throw new Error("VPAIDHTML5Client already destroyed!")}}function g(){if(window.location.origin){return window.location.origin}else{return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}}e.exports=u},{"./VPAIDAdUnit":2,"./utils":5}],4:[function(t,e,i){"use strict";function n(){this._subscribers={}}n.prototype.subscribe=function r(t,e,i){if(!this.isHandlerAttached(t,e)){this.get(e).push({handler:t,context:i,eventName:e})}};n.prototype.unsubscribe=function a(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t!==e.handler})};n.prototype.unsubscribeAll=function o(){this._subscribers={}};n.prototype.trigger=function(t,e){var i=this;var n=this.get(t).concat(this.get("*"));n.forEach(function(t){setTimeout(function(){if(i.isHandlerAttached(t.handler,t.eventName)){t.handler.call(t.context,e)}},0)})};n.prototype.triggerSync=function(t,e){var i=this.get(t).concat(this.get("*"));i.forEach(function(t){t.handler.call(t.context,e)})};n.prototype.get=function s(t){if(!this._subscribers[t]){this._subscribers[t]=[]}return this._subscribers[t]};n.prototype.isHandlerAttached=function u(t,e){return this.get(e).some(function(e){return t===e.handler})};e.exports=n},{}],5:[function(t,e,i){"use strict";function n(){}function r(t,e){return t?null:new Error(e)}var a={};function o(t){var e=a[t];if(e){clearTimeout(e);delete a[t]}}function s(t,e,i){var r,s;s=setTimeout(function(){e=n;delete s[r];i()},t);r=function(){if(e.apply(this,arguments)){o(r)}};a[r]=s;return r}function u(t,e,i){var n=document.createElement(e);if(i)n.id=i;t.appendChild(n);return n}function c(t,e,i){var n=l(t,null,i.zIndex);if(!p(n,f(e,i)))return;return n}function l(t,e,i){var n=document.createElement("iframe");n.src=e||"about:blank";n.marginWidth="0";n.marginHeight="0";n.frameBorder="0";n.width="100%";n.height="100%";d(n);if(i){n.style.zIndex=i}n.setAttribute("SCROLLING","NO");t.innerHTML="";t.appendChild(n);return n}function d(t){t.style.position="absolute";t.style.left="0";t.style.top="0";t.style.margin="0px";t.style.padding="0px";t.style.border="none";t.style.width="100%";t.style.height="100%"}function f(t,e){Object.keys(e).forEach(function(i){var n=typeof n==="object"?JSON.stringify(e[i]):e[i];t=t.replace(new RegExp("{{"+i+"}}","g"),n)});return t}function p(t,e){var i=t.contentWindow&&t.contentWindow.document;if(!i)return false;i.write(e);return true}function h(t,e){Object.keys(e).forEach(function(i){t[i]=e[i]});return t}function v(t){var e=-1;return function(){return t+"_"+ ++e}}e.exports={noop:n,validate:r,clearCallbackTimeout:o,callbackTimeout:s,createElementInEl:u,createIframeWithContent:c,createIframe:l,setFullSizeStyle:d,simpleTemplate:f,setIframeContent:p,extend:h,unique:v}},{}],6:[function(t,e,i){"use strict";var n=t("./InLine");var r=t("./Wrapper");function a(t){if(!(this instanceof a)){return new a(t)}this.initialize(t)}a.prototype.initialize=function(t){this.id=t.attr("id");this.sequence=t.attr("sequence");if(t.inLine){this.inLine=new n(t.inLine)}if(t.wrapper){this.wrapper=new r(t.wrapper)}};e.exports=a},{"./InLine":9,"./Wrapper":19}],7:[function(t,e,i){"use strict";var n=t("./TrackingEvent");var r=t("../../utils/utilityFunctions");var a=t("../../utils/xml");var o=t("../../utils/consoleLogger");function s(t){if(!(this instanceof s)){return new s(t)}o.info("<Companion> found companion ad");o.debug("<Companion>  companionJTree:",t);this.creativeType=a.attr(t.staticResource,"creativeType");this.staticResource=a.keyValue(t.staticResource);o.info("<Companion>  creativeType: "+this.creativeType);o.info("<Companion>  staticResource: "+this.staticResource);var e=null;if(a.keyValue(t.HTMLResource)){e=a.keyValue(t.HTMLResource)}else if(a.keyValue(t.hTMLResource)){e=a.keyValue(t.hTMLResource)}if(e!==null){o.info("<Companion> found html resource",e)}this.htmlResource=e;var i=null;if(a.keyValue(t.IFrameResource)){i=a.keyValue(t.IFrameResource)}else if(a.keyValue(t.iFrameresource)){i=a.keyValue(t.iFrameresource)}if(i!==null){o.info("<Companion> found iframe resource",i)}this.iframeResource=i;this.id=a.attr(t,"id");this.width=a.attr(t,"width");this.height=a.attr(t,"height");this.expandedWidth=a.attr(t,"expandedWidth");this.expandedHeight=a.attr(t,"expandedHeight");this.scalable=a.attr(t,"scalable");this.maintainAspectRatio=a.attr(t,"maintainAspectRatio");this.minSuggestedDuration=a.attr(t,"minSuggestedDuration");this.apiFramework=a.attr(t,"apiFramework");this.companionClickThrough=a.keyValue(t.companionClickThrough);this.trackingEvents=u(t.trackingEvents&&t.trackingEvents.tracking);o.info("<Companion>  companionClickThrough: "+this.companionClickThrough);function u(t){var e=[];if(r.isDefined(t)){t=r.isArray(t)?t:[t];t.forEach(function(t){e.push(new n(t))})}return e}}e.exports=s},{"../../utils/consoleLogger":31,"../../utils/utilityFunctions":37,"../../utils/xml":38,"./TrackingEvent":12}],8:[function(t,e,i){"use strict";var n=t("./Linear");var r=t("./Companion");var a=t("../../utils/utilityFunctions");function o(t){if(!(this instanceof o)){return new o(t)}this.id=t.attr("id");this.sequence=t.attr("sequence");this.adId=t.attr("adId");this.apiFramework=t.attr("apiFramework");if(t.linear){this.linear=new n(t.linear)}if(t.companionAds){var e=[];var i=t.companionAds&&t.companionAds.companion;if(a.isDefined(i)){i=a.isArray(i)?i:[i];i.forEach(function(t){e.push(new r(t))})}this.companionAds=e}}o.prototype.isSupported=function(){if(this.linear){return this.linear.isSupported()}return true};o.parseCreatives=function s(t){var e=[];var i;if(a.isDefined(t)&&a.isDefined(t.creative)){i=a.isArray(t.creative)?t.creative:[t.creative];i.forEach(function(t){e.push(new o(t))})}return e};e.exports=o},{"../../utils/utilityFunctions":37,"./Companion":7,"./Linear":10}],9:[function(t,e,i){"use strict";var n=t("./vastUtil");var r=t("./Creative");var a=t("../../utils/utilityFunctions");var o=t("../../utils/xml");function s(t){if(!(this instanceof s)){return new s(t)}this.adTitle=o.keyValue(t.adTitle);this.adSystem=o.keyValue(t.adSystem);this.impressions=n.parseImpressions(t.impression);this.creatives=r.parseCreatives(t.creatives);this.description=o.keyValue(t.description);this.advertiser=o.keyValue(t.advertiser);this.surveys=e(t.survey);this.error=o.keyValue(t.error);this.pricing=o.keyValue(t.pricing);this.extensions=t.extensions;function e(t){if(t){return a.transformArray(a.isArray(t)?t:[t],function(t){if(a.isNotEmptyString(t.keyValue)){return{uri:t.keyValue,type:t.attr("type")}}return undefined})}return[]}}s.prototype.isSupported=function(){var t,e;if(this.creatives.length===0){return false}for(t=0,e=this.creatives.length;t<e;t+=1){if(!this.creatives[t].isSupported()){return false}}return true};e.exports=s},{"../../utils/utilityFunctions":37,"../../utils/xml":38,"./Creative":8,"./vastUtil":21}],10:[function(t,e,i){"use strict";var n=t("./TrackingEvent");var r=t("./MediaFile");var a=t("./VideoClicks");var o=t("../../utils/utilityFunctions");var s=t("./parsers");var u=t("../../utils/xml");function c(t){if(!(this instanceof c)){return new c(t)}this.duration=s.duration(u.keyValue(t.duration));this.mediaFiles=i(t.mediaFiles&&t.mediaFiles.mediaFile);this.trackingEvents=e(t.trackingEvents&&t.trackingEvents.tracking,this.duration);this.skipoffset=s.offset(u.attr(t,"skipoffset"),this.duration);if(t.videoClicks){this.videoClicks=new a(t.videoClicks)}if(t.adParameters){this.adParameters=u.keyValue(t.adParameters);if(u.attr(t.adParameters,"xmlEncoded")){this.adParameters=u.decode(this.adParameters)}}function e(t,e){var i=[];if(o.isDefined(t)){t=o.isArray(t)?t:[t];t.forEach(function(t){i.push(new n(t,e))})}return i}function i(t){var e=[];if(o.isDefined(t)){t=o.isArray(t)?t:[t];t.forEach(function(t){e.push(new r(t))})}return e}}c.prototype.isSupported=function(){var t,e;for(t=0,e=this.mediaFiles.length;t<e;t+=1){if(this.mediaFiles[t].isSupported()){return true}}return false};e.exports=c},{"../../utils/utilityFunctions":37,"../../utils/xml":38,"./MediaFile":11,"./TrackingEvent":12,"./VideoClicks":18,"./parsers":20}],11:[function(t,e,i){"use strict";var n=t("../../utils/xml");var r=t("./vastUtil");var a=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"];function o(t){if(!(this instanceof o)){return new o(t)}this.src=n.keyValue(t);for(var e=0;e<a.length;e++){var i=a[e];this[i]=t.attr(i)}}o.prototype.isSupported=function(){if(r.isVPAID(this)){return!!r.findSupportedVPAIDTech(this.type)}if(this.type==="video/x-flv"){return r.isFlashSupported()}return true};e.exports=o},{"../../utils/xml":38,"./vastUtil":21}],12:[function(t,e,i){"use strict";var n=t("./parsers");var r=t("../../utils/xml");function a(t,e){if(!(this instanceof a)){return new a(t,e)}this.name=t.attr("event");this.uri=r.keyValue(t);if("progress"===this.name){this.offset=n.offset(t.attr("offset"),e)}}e.exports=a},{"../../utils/xml":38,"./parsers":20}],13:[function(t,e,i){"use strict";var n=t("./Ad");var r=t("./VASTError");var a=t("./VASTResponse");var o=t("./vastUtil");var s=t("../../utils/async");var u=t("../../utils/http").http;var c=t("../../utils/utilityFunctions");var l=t("../../utils/xml");var d=t("../../utils/consoleLogger");function f(t){if(!(this instanceof f)){return new f(t)}var e={WRAPPER_LIMIT:5};t=t||{};this.settings=c.extend({},t,e);this.errorURLMacros=[]}f.prototype.getVASTResponse=function p(t,e){var i=this;var n=o(t,e);if(n){if(c.isFunction(e)){return e(n)}throw n}s.waterfall([this._getVASTAd.bind(this,t),a],e);function a(t,e){try{var n=i._buildVASTResponse(t);e(null,n)}catch(r){e(r)}}function o(t,e){if(!t){return new r("on VASTClient.getVASTResponse, missing ad tag URL")}if(!c.isFunction(e)){return new r("on VASTClient.getVASTResponse, missing callback function")}}};f.prototype._getVASTAd=function(t,e){var i=this;a(t,function(t,n){var r=n&&c.isArray(n.ads)?n.ads:null;if(t){i._trackError(t,r);return e(t,r)}f(r.shift(),[],a);function a(t,n){if(t){i._trackError(t,n);if(r.length>0){f(r.shift(),[],a)}else{e(t,n)}}else{e(null,n)}}});function a(t,e){var n=i._requestVASTXml.bind(i,t);s.waterfall([n,o],e)}function o(t,e){var i;try{i=l.toJXONTree(t);d.debug("built JXONTree from VAST response:",i);if(c.isArray(i.ad)){i.ads=i.ad}else if(i.ad){i.ads=[i.ad]}else{i.ads=[]}e(u(i),i)}catch(n){e(new r("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml",100),null)}}function u(t){var e=l.attr(t,"version");if(!t.ad){return new r("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree",303)}if(e&&(e!=3&&e!=2)){return new r('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "'+e+'"',102)}return null}function f(t,e,n){if(e.length>=i.WRAPPER_LIMIT){return n(new r("on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is "+i.WRAPPER_LIMIT+")",302),e)}s.waterfall([function(e){if(c.isString(t)){v(t,e)}else{e(null,t)}},p],function(t,i){if(i){e.push(i)}if(t){return n(t,e)}if(i.wrapper){return f(i.wrapper.VASTAdTagURI,e,n)}return n(null,e)})}function p(t,e){try{var i=new n(t);e(h(i),i)}catch(a){e(new r("on VASTClient.getVASTAd.buildAd, error parsing xml",100),null)}}function h(t){var e=t.wrapper;var i=t.inLine;var n="on VASTClient.getVASTAd.validateAd, ";if(i&&e){return new r(n+"InLine and Wrapper both found on the same Ad",101)}if(!i&&!e){return new r(n+"nor wrapper nor inline elements found on the Ad",101)}if(i&&!i.isSupported()){return new r(n+"could not find MediaFile that is supported by this video player",403)}if(e&&!e.VASTAdTagURI){return new r(n+"missing 'VASTAdTagURI' in wrapper",101)}return null}function v(t,e){i._requestVASTXml(t,function(t,i){if(t){return e(t)}try{var n=l.toJXONTree(i);e(u(n),n.ad)}catch(a){e(new r("on VASTClient.getVASTAd.requestVASTAd, error parsing xml",100))}})}};f.prototype._requestVASTXml=function h(t,e){try{if(c.isFunction(t)){t(n)}else{d.info("requesting adTagUrl: "+t);u.get(t,n,{withCredentials:true})}}catch(i){e(i)}function n(t,i,n){if(t){var a=c.isDefined(n)?"on VASTClient.requestVastXML, HTTP request error with status '"+n+"'":"on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";return e(new r(a,301),null)}e(null,i)}};f.prototype._buildVASTResponse=function v(t){var e=new a;i(e,t);n(e);return e;function i(t,e){e.forEach(function(e){t.addAd(e)})}function n(t){var e=t.trackingEvents.progress;if(!t.hasLinear()){throw new r("on VASTClient._buildVASTResponse, Received an Ad type that is not supported",200)}if(t.duration===undefined){throw new r("on VASTClient._buildVASTResponse, Missing duration field in VAST response",101)}if(e){e.forEach(function(t){if(!c.isNumber(t.offset)){throw new r("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event",101)}})}}};f.prototype._trackError=function(t,e){if(!c.isArray(e)||e.length===0){return}var i=[];e.forEach(n);o.track(i,{ERRORCODE:t.code||900});function n(t){if(t.wrapper&&t.wrapper.error){i.push(t.wrapper.error)}if(t.inLine&&t.inLine.error){i.push(t.inLine.error)}}};e.exports=f},{"../../utils/async":30,"../../utils/consoleLogger":31,"../../utils/http":33,"../../utils/utilityFunctions":37,"../../utils/xml":38,"./Ad":6,"./VASTError":14,"./VASTResponse":16,"./vastUtil":21}],14:[function(t,e,i){"use strict";function n(t,e){this.message="VAST Error: "+(t||"");if(e){this.code=e}}n.prototype=new Error;n.prototype.name="VAST Error";e.exports=n},{}],15:[function(t,e,i){"use strict";var n=t("./VASTResponse");var r=t("./VASTError");var a=t("./VASTTracker");var o=t("./vastUtil");var s=t("../../utils/async");var u=t("../../utils/dom");var c=t("../../utils/playerUtils");var l=t("../../utils/utilityFunctions");var d=t("../../utils/consoleLogger");function f(t){if(!(this instanceof f)){return new f(t)}this.player=t}f.prototype.playAd=function p(t,e){var i=this;e=e||l.noop;if(!(t instanceof n)){return e(new r("On VASTIntegrator, missing required VASTResponse"))}s.waterfall([function(e){e(null,t)},this._selectAdSource.bind(this),this._createVASTTracker.bind(this),this._addClickThrough.bind(this),this._addSkipButton.bind(this),this._setupEvents.bind(this),this._playSelectedAd.bind(this)],function(t,n){if(t&&n){i._trackError(t,n)}e(t,n)});this._adUnit={_src:null,type:"VAST",pauseAd:function(){i.player.pause(true)},resumeAd:function(){i.player.play(true)},isPaused:function(){return i.player.paused(true)},getSrc:function(){return this._src}};return this._adUnit};f.prototype._selectAdSource=function h(t,e){var i;var n=u.getDimension(this.player.el()).width;t.mediaFiles.sort(function a(t,e){var i=Math.abs(n-t.width);var r=Math.abs(n-e.width);return i-r});i=this.player.selectSource(t.mediaFiles).source;if(i){d.info("selected source: ",i);if(this._adUnit){this._adUnit._src=i}return e(null,i,t)}e(new r("Could not find Ad mediafile supported by this player",403),t)};f.prototype._createVASTTracker=function v(t,e,i){try{i(null,t,new a(t.src,e),e)}catch(n){i(n,e)}};f.prototype._setupEvents=function g(t,e,i,n){var r;var a=this.player;a.on("fullscreenchange",s);a.on("vast.adStart",d);a.on("pause",u);a.on("timeupdate",l);a.on("volumechange",f);c.once(a,["vast.adEnd","vast.adsCancel"],o);c.once(a,["vast.adEnd","vast.adsCancel","vast.adSkip"],function(t){if(t.type==="vast.adEnd"){e.trackComplete()}});return n(null,t,i);function o(){a.off("fullscreenchange",s);a.off("vast.adStart",d);a.off("pause",u);a.off("timeupdate",l);a.off("volumechange",f)}function s(){if(a.isFullscreen()){e.trackFullscreen()}else{e.trackExitFullscreen()}}function u(){if(Math.abs(a.duration()-a.currentTime())<2){return}e.trackPause();c.once(a,["play","vast.adEnd","vast.adsCancel"],function(t){if(t.type==="play"){e.trackResume()}})}function l(){var t=a.currentTime()*1e3;e.trackProgress(t)}function d(){e.trackImpressions();e.trackCreativeView()}function f(){var t=a.muted();if(t){e.trackMute()}else if(r){e.trackUnmute()}r=t}};f.prototype._addSkipButton=function m(t,e,i,n){var r;var a=this;if(l.isNumber(i.skipoffset)){r=i.skipoffset/1e3;o(this.player,r)}n(null,t,e,i);function o(t,e){var i=s(t);var n=d.bind(a,i,e,t);t.el().appendChild(i);t.on("timeupdate",n);c.once(t,["vast.adEnd","vast.adsCancel"],r);function r(){t.off("timeupdate",n);u.remove(i)}}function s(t){var i=window.document.createElement("div");u.addClass(i,"vast-skip-button");i.onclick=function(n){if(u.hasClass(i,"enabled")){e.trackSkip();t.trigger("vast.adSkip")}if(window.Event.prototype.stopPropagation!==undefined){n.stopPropagation()}else{return false}};return i}function d(t,e,i){var n=Math.ceil(e-i.currentTime());if(n>0){t.innerHTML="Skip in "+l.toFixedDigits(n,2)+"..."}else{if(!u.hasClass(t,"enabled")){u.addClass(t,"enabled");t.innerHTML="Skip ad"}}}};f.prototype._addClickThrough=function y(t,e,i,n){var r=this.player;var a=d(r,e,i);var s=f.bind(this,a,i,r);r.el().insertBefore(a,r.controlBar.el());r.on("timeupdate",s);c.once(r,["vast.adEnd","vast.adsCancel"],h);return n(null,t,e,i);function d(t,e,i){var n=window.document.createElement("a");var r=i.clickThrough;u.addClass(n,"vast-blocker");n.href=p(r,t);if(l.isString(r)){n.target="_blank"}n.onclick=function(i){if(t.paused()){t.play();if(window.Event.prototype.stopPropagation!==undefined){i.stopPropagation()}return false}t.pause();e.trackClick()};return n}function f(t,e,i){t.href=p(e.clickThrough,i)}function p(e,i){var n={ASSETURI:t.src,CONTENTPLAYHEAD:o.formatProgress(i.currentTime()*1e3)};return e?o.parseURLMacro(e,n):"#"}function h(){r.off("timeupdate",s);u.remove(a)}};f.prototype._playSelectedAd=function A(t,e,i){var n=this.player;n.preload("auto");n.src(t);d.debug("<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad...");c.once(n,["durationchange","error","vast.adsCancel"],function(t){if(t.type==="durationchange"){d.debug("<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()");a()}else if(t.type==="error"){i(new r("on VASTIntegrator, Player is unable to play the Ad",400),e)}});function a(){c.once(n,["playing","vast.adsCancel"],function(t){if(t.type==="vast.adsCancel"){return}d.debug("<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart...");n.trigger("vast.adStart");n.on("ended",r);n.on("vast.adsCancel",r);n.on("vast.adSkip",r);function r(t){if(t.type==="ended"&&n.duration()-n.currentTime()>3){return}n.off("ended",r);n.off("vast.adsCancel",r);n.off("vast.adSkip",r);if(t.type==="ended"||t.type==="vast.adSkip"){i(null,e)}}});d.debug("<VASTIntegrator._playSelectedAd/playAd> calling player.play()...");n.play()}};f.prototype._trackError=function T(t,e){o.track(e.errorURLMacros,{ERRORCODE:t.code||900})};e.exports=f},{"../../utils/async":30,"../../utils/consoleLogger":31,"../../utils/dom":32,"../../utils/playerUtils":35,"../../utils/utilityFunctions":37,"./VASTError":14,"./VASTResponse":16,"./VASTTracker":17,"./vastUtil":21}],16:[function(t,e,i){"use strict";var n=t("./Ad");var r=t("./VideoClicks");var a=t("./Linear");var o=t("./InLine");var s=t("./Wrapper");var u=t("../../utils/utilityFunctions");var c=t("../../utils/xml");window.InLine__A=o;function l(){if(!(this instanceof l)){return new l}this._linearAdded=false;this.ads=[];this.errorURLMacros=[];this.impressions=[];this.clickTrackings=[];this.customClicks=[];this.trackingEvents={};this.mediaFiles=[];this.clickThrough=undefined;this.adTitle="";this.duration=undefined;this.skipoffset=undefined}l.prototype.addAd=function(t){var e,i;if(t instanceof n){e=t.inLine;i=t.wrapper;this.ads.push(t);if(e){this._addInLine(e)}if(i){this._addWrapper(i)}}};l.prototype._addErrorTrackUrl=function(t){var e=t instanceof c.JXONTree?c.keyValue(t):t;if(e){this.errorURLMacros.push(e)}};l.prototype._addImpressions=function(t){u.isArray(t)&&d(this.impressions,t)};l.prototype._addClickThrough=function(t){if(u.isNotEmptyString(t)){this.clickThrough=t}};l.prototype._addClickTrackings=function(t){u.isArray(t)&&d(this.clickTrackings,t)};l.prototype._addCustomClicks=function(t){u.isArray(t)&&d(this.customClicks,t)};l.prototype._addTrackingEvents=function(t){var e=this.trackingEvents;if(t){t=u.isArray(t)?t:[t];t.forEach(function(t){if(!e[t.name]){e[t.name]=[]}e[t.name].push(t)})}};l.prototype._addTitle=function(t){if(u.isNotEmptyString(t)){this.adTitle=t}};l.prototype._addDuration=function(t){if(u.isNumber(t)){this.duration=t}};l.prototype._addVideoClicks=function(t){if(t instanceof r){this._addClickThrough(t.clickThrough);this._addClickTrackings(t.clickTrackings);this._addCustomClicks(t.customClicks)}};l.prototype._addMediaFiles=function(t){u.isArray(t)&&d(this.mediaFiles,t)};l.prototype._addSkipoffset=function(t){if(t){this.skipoffset=t}};l.prototype._addAdParameters=function(t){if(t){this.adParameters=t}};l.prototype._addLinear=function(t){if(t instanceof a){this._addDuration(t.duration);this._addTrackingEvents(t.trackingEvents);this._addVideoClicks(t.videoClicks);this._addMediaFiles(t.mediaFiles);this._addSkipoffset(t.skipoffset);this._addAdParameters(t.adParameters);this._linearAdded=true}};l.prototype._addInLine=function(t){var e=this;if(t instanceof o){this._addTitle(t.adTitle);this._addErrorTrackUrl(t.error);this._addImpressions(t.impressions);t.creatives.forEach(function(t){if(t.linear){e._addLinear(t.linear)}})}};l.prototype._addWrapper=function(t){var e=this;if(t instanceof s){this._addErrorTrackUrl(t.error);this._addImpressions(t.impressions);t.creatives.forEach(function(t){var i=t.linear;if(i){e._addVideoClicks(i.videoClicks);e.clickThrough=undefined;e._addTrackingEvents(i.trackingEvents)}})}};l.prototype.hasLinear=function(){return this._linearAdded};function d(t,e){e.forEach(function(e){t.push(e)})}e.exports=l},{"../../utils/utilityFunctions":37,"../../utils/xml":38,"./Ad":6,"./InLine":9,"./Linear":10,"./VideoClicks":18,"./Wrapper":19}],17:[function(t,e,i){"use strict";var n=t("./VASTError");var r=t("./VASTResponse");var a=t("./vastUtil");var o=t("../../utils/utilityFunctions");function s(t,e){if(!(this instanceof s)){return new s(t,e)}this.sanityCheck(t,e);this.initialize(t,e)}s.prototype.initialize=function(t,e){this.response=e;this.assetURI=t;this.progress=0;this.quartiles={firstQuartile:{tracked:false,time:Math.round(25*e.duration)/100},midpoint:{tracked:false,time:Math.round(50*e.duration)/100},thirdQuartile:{tracked:false,time:Math.round(75*e.duration)/100}}};s.prototype.sanityCheck=function(t,e){if(!o.isString(t)||o.isEmptyString(t)){throw new n("on VASTTracker constructor, missing required the URI of the ad asset being played")}if(!(e instanceof r)){throw new n("on VASTTracker constructor, missing required VAST response")}};s.prototype.trackURLs=function u(t,e){if(o.isArray(t)&&t.length>0){e=o.extend({ASSETURI:this.assetURI,CONTENTPLAYHEAD:a.formatProgress(this.progress)},e||{});a.track(t,e)}};s.prototype.trackEvent=function c(t,e){this.trackURLs(i(this.response.trackingEvents[t]));if(e){this.response.trackingEvents[t]=undefined}function i(t){var e;if(t){e=[];t.forEach(function(t){if(!t.uri){return}e.push(t.uri)})}return e}};s.prototype.trackProgress=function l(t){var e=this;var i=[];var n=true;var r=false;var a=this.response.trackingEvents;if(o.isNumber(t)){u("start",n,t>0);u("rewind",r,s(this.progress,t));c(t);d(t);f();this.progress=t}function s(e,i){var n=3e3;return e>t&&Math.abs(i-e)>n}function u(t,e,n){if(a[t]&&n){i.push({name:t,trackOnce:!!e})}}function c(t){var i=e.quartiles;var r=e.quartiles.firstQuartile;var a=e.quartiles.midpoint;var o=e.quartiles.thirdQuartile;if(!r.tracked){s("firstQuartile",t)}else if(!a.tracked){s("midpoint",t)}else if(!o.tracked){s("thirdQuartile",t)}function s(t,e){var r=i[t];if(l(r,e)){r.tracked=true;u(t,n,true)}}}function l(t,e){var i=t.time;return e>=i&&e<=i+5e3}function d(t){if(!o.isArray(a.progress)){return}var i=[];a.progress.forEach(function(n){if(n.offset<=t){e.trackURLs([n.uri])}else{i.push(n)}});a.progress=i}function f(){i.forEach(function(t){e.trackEvent(t.name,t.trackOnce)})}};["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(t){s.prototype["track"+o.capitalize(t)]=function(){this.trackEvent(t)}});["start","skip","close","closeLinear"].forEach(function(t){s.prototype["track"+o.capitalize(t)]=function(){this.trackEvent(t,true)}});["firstQuartile","midpoint","thirdQuartile"].forEach(function(t){s.prototype["track"+o.capitalize(t)]=function(){this.quartiles[t].tracked=true;this.trackEvent(t,true)}});s.prototype.trackComplete=function(){if(this.quartiles.thirdQuartile.tracked){this.trackEvent("complete",true)}};s.prototype.trackErrorWithCode=function d(t){if(o.isNumber(t)){this.trackURLs(this.response.errorURLMacros,{ERRORCODE:t})}};s.prototype.trackImpressions=function f(){
this.trackURLs(this.response.impressions)};s.prototype.trackCreativeView=function p(){this.trackEvent("creativeView")};s.prototype.trackClick=function h(){this.trackURLs(this.response.clickTrackings)};e.exports=s},{"../../utils/utilityFunctions":37,"./VASTError":14,"./VASTResponse":16,"./vastUtil":21}],18:[function(t,e,i){"use strict";var n=t("../../utils/utilityFunctions");var r=t("../../utils/xml");function a(t){if(!(this instanceof a)){return new a(t)}this.clickThrough=r.keyValue(t.clickThrough);this.clickTrackings=e(t.clickTracking);this.customClicks=e(t.customClick);function e(t){var e=[];if(t){t=n.isArray(t)?t:[t];t.forEach(function(t){e.push(r.keyValue(t))})}return e}}e.exports=a},{"../../utils/utilityFunctions":37,"../../utils/xml":38}],19:[function(t,e,i){"use strict";var n=t("./vastUtil");var r=t("./Creative");var a=t("../../utils/utilityFunctions");var o=t("../../utils/xml");function s(t){if(!(this instanceof s)){return new s(t)}this.adSystem=o.keyValue(t.adSystem);this.impressions=n.parseImpressions(t.impression);this.VASTAdTagURI=o.keyValue(t.vASTAdTagURI);this.creatives=r.parseCreatives(t.creatives);this.error=o.keyValue(t.error);this.extensions=t.extensions;this.followAdditionalWrappers=a.isDefined(o.attr(t,"followAdditionalWrappers"))?o.attr(t,"followAdditionalWrappers"):true;this.allowMultipleAds=o.attr(t,"allowMultipleAds");this.fallbackOnNoAd=o.attr(t,"fallbackOnNoAd")}e.exports=s},{"../../utils/utilityFunctions":37,"../../utils/xml":38,"./Creative":8,"./vastUtil":21}],20:[function(t,e,i){"use strict";var n=t("../../utils/utilityFunctions");var r=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;var a={duration:function o(t){var e,i;if(n.isString(t)){e=t.match(r);if(e){i=a(e[1])+o(e[2])+s(e[3])+parseInt(e[5]||0)}}return isNaN(i)?null:i;function a(t){return parseInt(t,10)*60*60*1e3}function o(t){return parseInt(t,10)*60*1e3}function s(t){return parseInt(t,10)*1e3}},offset:function s(t,e){if(i(t)){return n(t,e)}return a.duration(t);function i(t){var e=/^\d+(\.\d+)?%$/g;return e.test(t)}function n(t,e){if(e){return r(e,parseFloat(t.replace("%","")))}return null}function r(t,e){return t*e/100}}};e.exports=a},{"../../utils/utilityFunctions":37}],21:[function(t,e,i){"use strict";var n=t("../../utils/utilityFunctions");var r=t("../vpaid/VPAIDHTML5Tech");var a={track:function o(t,e){var i=a.parseURLMacros(t,e);var n=[];i.forEach(function(t){var e=new Image;e.src=t;n.push(e)});return n},parseURLMacros:function s(t,e){var i=[];e=e||{};if(!e["CACHEBUSTING"]){e["CACHEBUSTING"]=Math.round(Math.random()*1e10)}t.forEach(function(t){i.push(a._parseURLMacro(t,e))});return i},parseURLMacro:function u(t,e){e=e||{};if(!e["CACHEBUSTING"]){e["CACHEBUSTING"]=Math.round(Math.random()*1e10)}return a._parseURLMacro(t,e)},_parseURLMacro:function c(t,e){e=e||{};n.forEach(e,function(e,i){t=t.replace(new RegExp("\\["+i+"\\]","gm"),e)});return t},parseDuration:function l(t){var e=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;var i,r;if(n.isString(t)){i=t.match(e);if(i){r=a(i[1])+o(i[2])+s(i[3])+parseInt(i[5]||0)}}return isNaN(r)?null:r;function a(t){return parseInt(t,10)*60*60*1e3}function o(t){return parseInt(t,10)*60*1e3}function s(t){return parseInt(t,10)*1e3}},parseImpressions:function d(t){if(t){t=n.isArray(t)?t:[t];return n.transformArray(t,function(t){if(n.isNotEmptyString(t.keyValue)){return t.keyValue}return undefined})}return[]},formatProgress:function f(t){var e,i,r,a;e=t/(60*60*1e3);e=Math.floor(e);i=t/(60*1e3)%60;i=Math.floor(i);r=t/1e3%60;r=Math.floor(r);a=t%1e3;return n.toFixedDigits(e,2)+":"+n.toFixedDigits(i,2)+":"+n.toFixedDigits(r,2)+"."+n.toFixedDigits(a,3)},parseOffset:function p(t,e){if(i(t)){return n(t,e)}return a.parseDuration(t);function i(t){var e=/^\d+(\.\d+)?%$/g;return e.test(t)}function n(t,e){if(e){return r(e,parseFloat(t.replace("%","")))}return null}function r(t,e){return t*e/100}},VPAID_techs:[r],isVPAID:function h(t){return!!t&&t.apiFramework==="VPAID"},findSupportedVPAIDTech:function v(t){var e,i,n;for(e=0,i=this.VPAID_techs.length;e<i;e+=1){n=this.VPAID_techs[e];if(n.supports(t)){return n}}return null},isFlashSupported:function g(){return false}};e.exports=a},{"../../utils/utilityFunctions":37,"../vpaid/VPAIDHTML5Tech":23}],22:[function(t,e,i){"use strict";var n=t("../vast/VASTError");var r=t("../../utils/utilityFunctions");function a(t,e){if(!(this instanceof a)){return new a(t,e)}i(t,e);this.options=r.extend({},e);this._adUnit=t;function i(t,e){if(!t||!a.checkVPAIDInterface(t)){throw new n("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface")}if(!r.isObject(e)){throw new n("on VPAIDAdUnitWrapper, expected options hash  but got '"+e+"'")}if(!("responseTimeout"in e)||!r.isNumber(e.responseTimeout)){throw new n("on VPAIDAdUnitWrapper, expected responseTimeout in options")}}}a.checkVPAIDInterface=function o(t){var e=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"];for(var i=0,n=e.length;i<n;i++){if(!t||!r.isFunction(t[e[i]])){return false}}return a(t)&&o(t);function a(t){return r.isFunction(t.subscribe)||r.isFunction(t.addEventListener)||r.isFunction(t.on)}function o(t){return r.isFunction(t.unsubscribe)||r.isFunction(t.removeEventListener)||r.isFunction(t.off)}};a.prototype.adUnitAsyncCall=function(){var t=r.arrayLikeObjToArray(arguments);var e=t.shift();var i=t.pop();var a;o(e,i,this._adUnit);t.push(s());this._adUnit[e].apply(this._adUnit,t);a=setTimeout(function(){a=null;i(new n("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+e+"'"));i=r.noop},this.options.responseTimeout);function o(t,e,i){if(!r.isString(t)||!r.isFunction(i[t])){throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name")}if(!r.isFunction(e)){throw new n("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}}function s(){return function(){if(a){clearTimeout(a)}i.apply(this,arguments)}}};a.prototype.on=function(t,e){var i=this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on;i.call(this._adUnit,t,e)};a.prototype.off=function(t,e){var i=this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off;i.call(this._adUnit,t,e)};a.prototype.waitForEvent=function(t,e,i){var a;o(t,e);i=i||null;this.on(t,s);a=setTimeout(function(){e(new n("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+t+"'"));a=null;e=r.noop},this.options.responseTimeout);function o(t,e){if(!r.isString(t)){throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing evt name")}if(!r.isFunction(e)){throw new n("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}}function s(){var t=r.arrayLikeObjToArray(arguments);if(a){clearTimeout(a);a=null}t.unshift(null);e.apply(i,t)}};a.prototype.handshakeVersion=function(t,e){this.adUnitAsyncCall("handshakeVersion",t,e)};a.prototype.initAd=function(t,e,i,n,r,a){this.waitForEvent("AdLoaded",a);this._adUnit.initAd(t,e,i,n,r)};a.prototype.resizeAd=function(t,e,i,n){this.adUnitAsyncCall("resizeAd",t,e,i,n)};a.prototype.startAd=function(t){this.waitForEvent("AdStarted",t);this._adUnit.startAd()};a.prototype.stopAd=function(t){this.waitForEvent("AdStopped",t);this._adUnit.stopAd()};a.prototype.pauseAd=function(t){this.waitForEvent("AdPaused",t);this._adUnit.pauseAd()};a.prototype.resumeAd=function(t){this.waitForEvent("AdPlaying",t);this._adUnit.resumeAd()};a.prototype.expandAd=function(t){this.waitForEvent("AdExpandedChange",t);this._adUnit.expandAd()};a.prototype.collapseAd=function(t){this.waitForEvent("AdExpandedChange",t);this._adUnit.collapseAd()};a.prototype.skipAd=function(t){this.waitForEvent("AdSkipped",t);this._adUnit.skipAd()};["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(t){var e="get"+r.capitalize(t);a.prototype[e]=function(t){this.adUnitAsyncCall(e,t)}});a.prototype.setAdVolume=function(t,e){this.adUnitAsyncCall("setAdVolume",t,e)};e.exports=a},{"../../utils/utilityFunctions":37,"../vast/VASTError":14}],23:[function(t,e,i){"use strict";var n=t("../../utils/mimetypes");var r=t("../vast/VASTError");var a=t("VPAIDHTML5Client/js/VPAIDHTML5Client");var o=t("../../utils/utilityFunctions");var s=t("../../utils/dom");var u=t("../../utils/consoleLogger");function c(t){if(!(this instanceof c)){return new c(t)}e(t);this.name="vpaid-html5";this.containerEl=null;this.videoEl=null;this.vpaidHTMLClient=null;this.mediaFile=t;function e(t){if(!t||!o.isString(t.src)){throw new r(c.INVALID_MEDIA_FILE)}}}c.VPAIDHTML5Client=a;c.supports=function(t){return!o.isOldIE()&&n.html5.indexOf(t)>-1};c.prototype.loadAdUnit=function d(t,e,i){n(t,e,i);this.containerEl=t;this.videoEl=e;this.vpaidHTMLClient=new c.VPAIDHTML5Client(t,e,{});this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,i);function n(t,e,i){if(!s.isDomElement(t)){throw new r(c.INVALID_DOM_CONTAINER_EL)}if(!s.isDomElement(e)||e.tagName.toLowerCase()!=="video"){throw new r(c.INVALID_DOM_CONTAINER_EL)}if(!o.isFunction(i)){throw new r(c.MISSING_CALLBACK)}}};c.prototype.unloadAdUnit=function f(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(t){u.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}if(this.containerEl){s.remove(this.containerEl);this.containerEl=null}};var l="on VPAIDHTML5Tech";c.INVALID_MEDIA_FILE=l+", invalid MediaFile";c.INVALID_DOM_CONTAINER_EL=l+", invalid container HtmlElement";c.INVALID_DOM_VIDEO_EL=l+", invalid HTMLVideoElement";c.MISSING_CALLBACK=l+", missing valid callback";e.exports=c},{"../../utils/consoleLogger":31,"../../utils/dom":32,"../../utils/mimetypes":34,"../../utils/utilityFunctions":37,"../vast/VASTError":14,"VPAIDHTML5Client/js/VPAIDHTML5Client":3}],24:[function(t,e,i){"use strict";var n=t("../../utils/mimetypes");var r=t("../vast/VASTError");var a=t("../vast/VASTResponse");var o=t("../vast/VASTTracker");var s=t("../vast/vastUtil");var u=t("./VPAIDAdUnitWrapper");var c=t("../../utils/async");var l=t("../../utils/dom");var d=t("../../utils/playerUtils");var f=t("../../utils/utilityFunctions");var p=t("../../utils/consoleLogger");function h(t,e){if(!(this instanceof h)){return new h(t)}this.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"};this.player=t;this.containerEl=i(t);this.options={responseTimeout:5e3,VPAID_VERSION:"2.0"};this.settings=e;function i(){var e=document.createElement("div");l.addClass(e,"VPAID-container");t.el().insertBefore(e,t.controlBar.el());return e}}h.prototype.playAd=function m(t,e){if(!(t instanceof a)){return e(new r("on VASTIntegrator.playAd, missing required VASTResponse"))}var i=this;var n=this.player;p.debug("<VPAIDIntegrator.playAd> looking for supported tech...");var o=this._findSupportedTech(t,this.settings);e=e||f.noop;this._adUnit=null;l.addClass(n.el(),"vjs-vpaid-ad");n.on("vast.adsCancel",d);n.one("vpaid.adEnd",function(){n.off("vast.adsCancel",d);h()});if(o){p.info("<VPAIDIntegrator.playAd> found tech: ",o);c.waterfall([function(e){e(null,o,t)},this._loadAdUnit.bind(this),this._playAdUnit.bind(this),this._finishPlaying.bind(this)],u);this._adUnit={_paused:true,type:"VPAID",pauseAd:function(){n.trigger("vpaid.pauseAd");n.pause(true)},resumeAd:function(){n.trigger("vpaid.resumeAd")},isPaused:function(){return this._paused},getSrc:function(){return o.mediaFile}}}else{p.debug("<VPAIDIntegrator.playAd> could not find suitable tech");var s=new r("on VPAIDIntegrator.playAd, could not find a supported mediaFile",403);u(s,this._adUnit,t)}return this._adUnit;function u(t,r,a){if(t&&a){i._trackError(a,t.code)}n.trigger("vpaid.adEnd");e(t,a)}function d(){n.trigger("vpaid.adEnd")}function h(){if(o){o.unloadAdUnit()}l.removeClass(n.el(),"vjs-vpaid-ad")}};h.prototype._findSupportedTech=function(t,e){if(!(t instanceof a)){return null}var i=t.mediaFiles.filter(s.isVPAID);var r=e&&e.preferredTech;var o=[];var u,c,l,d,f;for(u=0,c=i.length;u<c;u+=1){l=i[u];d=s.findSupportedVPAIDTech(l.type);if(!d){continue}f=r?l.type===r||n[r]&&n[r].indexOf(l.type)>-1:false;if(f){return new d(l,e)}o.push({mediaFile:l,tech:d})}if(o.length){var p=o[0];return new p.tech(p.mediaFile,e)}return null};h.prototype._createVPAIDAdUnitWrapper=function(t,e,i){return new u(t,{src:e,responseTimeout:i})};h.prototype._loadAdUnit=function(t,e,i){var n=this;var r=this.player;var a=r.el().querySelector(".vjs-tech");var o=this.settings.responseTimeout||this.options.responseTimeout;t.loadAdUnit(this.containerEl,a,function(a,s){if(a){return i(a,s,e)}try{var u=n._createVPAIDAdUnitWrapper(s,t.mediaFile.src,o);var c="vjs-"+t.name+"-ad";l.addClass(r.el(),c);r.one("vpaid.adEnd",function(){l.removeClass(r.el(),c)});i(null,u,e)}catch(d){i(d,s,e)}})};h.prototype._playAdUnit=function(t,e,i){c.waterfall([function(i){i(null,t,e)},this._handshake.bind(this),this._initAd.bind(this),this._setupEvents.bind(this),this._addSkipButton.bind(this),this._linkPlayerControls.bind(this),this._startAd.bind(this)],i)};h.prototype._handshake=function y(t,e,i){t.handshakeVersion(this.options.VPAID_VERSION,function(a,o){if(a){return i(a,t,e)}if(o&&n(o)){return i(null,t,e)}return i(new r('on VPAIDIntegrator._handshake, unsupported version "'+o+'"'),t,e)});function n(t){var e=a(t);return e>=1&&e<=2}function a(t){var e=t.split(".");return parseInt(e[0],10)}};h.prototype._initAd=function(t,e,i){var n=this.player.el().querySelector(".vjs-tech");var r=l.getDimension(n);t.initAd(r.width,r.height,this.VIEW_MODE.NORMAL,-1,{AdParameters:e.adParameters||""},function(n){i(n,t,e)})};h.prototype._createVASTTracker=function(t,e){return new o(t,e)};h.prototype._setupEvents=function(t,e,i){var n=t.options.src;var r=this._createVASTTracker(n,e);var a=this.player;var o=this;t.on("AdSkipped",function(){a.trigger("vpaid.AdSkipped");r.trackSkip()});t.on("AdImpression",function(){a.trigger("vpaid.AdImpression");r.trackImpressions()});t.on("AdStarted",function(){a.trigger("vpaid.AdStarted");r.trackCreativeView();u()});t.on("AdVideoStart",function(){a.trigger("vpaid.AdVideoStart");r.trackStart();u()});t.on("AdPlaying",function(){a.trigger("vpaid.AdPlaying");r.trackResume();u()});t.on("AdPaused",function(){a.trigger("vpaid.AdPaused");r.trackPause();c()});function u(){if(o._adUnit&&o._adUnit.isPaused()){o._adUnit._paused=false}a.trigger("play")}function c(){if(o._adUnit){o._adUnit._paused=true}a.trigger("pause")}t.on("AdVideoFirstQuartile",function(){a.trigger("vpaid.AdVideoFirstQuartile");r.trackFirstQuartile()});t.on("AdVideoMidpoint",function(){a.trigger("vpaid.AdVideoMidpoint");r.trackMidpoint()});t.on("AdVideoThirdQuartile",function(){a.trigger("vpaid.AdVideoThirdQuartile");r.trackThirdQuartile()});t.on("AdVideoComplete",function(){a.trigger("vpaid.AdVideoComplete");r.trackComplete()});t.on("AdClickThru",function(i){a.trigger("vpaid.AdClickThru");var n=i.url;var o=i.playerHandles;var u=f.isNotEmptyString(n)?n:c(e.clickThrough);r.trackClick();if(o&&u){window.open(u,"_blank")}function c(e){var i={ASSETURI:t.options.src,CONTENTPLAYHEAD:0};return e?s.parseURLMacro(e,i):null}});t.on("AdUserAcceptInvitation",function(){a.trigger("vpaid.AdUserAcceptInvitation");r.trackAcceptInvitation();r.trackAcceptInvitationLinear()});t.on("AdUserClose",function(){a.trigger("vpaid.AdUserClose");r.trackClose();r.trackCloseLinear()});t.on("AdUserMinimize",function(){a.trigger("vpaid.AdUserMinimize");r.trackCollapse()});t.on("AdError",function(){a.trigger("vpaid.AdError");r.trackErrorWithCode(901)});t.on("AdVolumeChange",function(){a.trigger("vpaid.AdVolumeChange");var e=a.volume();t.getAdVolume(function(t,i){if(e!==i){if(i===0&&e>0){r.trackMute()}if(i>0&&e===0){r.trackUnmute()}a.volume(i)}})});var d=v.bind(this,a,t,this.VIEW_MODE);var p=f.throttle(d,100);var h=this.settings.autoResize;if(h){l.addEventListener(window,"resize",p);l.addEventListener(window,"orientationchange",p)}a.on("vast.resize",d);a.on("vpaid.pauseAd",g);a.on("vpaid.resumeAd",m);a.one("vpaid.adEnd",function(){a.off("vast.resize",d);a.off("vpaid.pauseAd",g);a.off("vpaid.resumeAd",m);if(h){l.removeEventListener(window,"resize",p);l.removeEventListener(window,"orientationchange",p)}});i(null,t,e);function g(){t.pauseAd(f.noop)}function m(){t.resumeAd(f.noop)}};h.prototype._addSkipButton=function(t,e,i){var n;var r=this.player;t.on("AdSkippableStateChange",a);d.once(r,["vast.adEnd","vast.adsCancel"],s);i(null,t,e);function a(){r.trigger("vpaid.AdSkippableStateChange");t.getAdSkippableState(function(t,e){if(e){if(!n){o(r)}}else{s(r)}})}function o(t){n=u(t);t.el().appendChild(n)}function s(){l.remove(n);n=null}function u(){var e=window.document.createElement("div");l.addClass(e,"vast-skip-button");l.addClass(e,"enabled");e.innerHTML="Skip ad";e.onclick=function(e){t.skipAd(f.noop);if(window.Event.prototype.stopPropagation!==undefined){e.stopPropagation()}else{return false}};return e}};h.prototype._linkPlayerControls=function(t,e,i){var n=this;r(this.player,t);a(this.player,t,this.VIEW_MODE);i(null,t,e);function r(t,e){t.on("volumechange",i);e.on("AdVolumeChange",n);t.one("vpaid.adEnd",function(){t.off("volumechange",i)});function i(){var i=t.muted()?0:t.volume();e.setAdVolume(i,g)}function n(){t.trigger("vpaid.AdVolumeChange");var i=t.volume();e.getAdVolume(function(e,n){if(e){g(e)}else{if(i!==n){t.volume(n)}}})}}function a(t,e,i){var r=v.bind(n,t,e,i);t.on("fullscreenchange",r);t.one("vpaid.adEnd",function(){t.off("fullscreenchange",r)})}};h.prototype._startAd=function(t,e,i){var n=this.player;t.startAd(function(r){if(!r){n.trigger("vast.adStart")}i(r,t,e)})};h.prototype._finishPlaying=function(t,e,i){var n=this.player;t.on("AdStopped",function(){n.trigger("vpaid.AdStopped");a(null)});t.on("AdError",function(t){var e=t?t.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";a(new r(e))});function a(n){i(n,t,e)}};h.prototype._trackError=function A(t,e){s.track(t.errorURLMacros,{ERRORCODE:e||901})};function v(t,e,i){var n=t.el().querySelector(".vjs-tech");var r=l.getDimension(n);var a=t.isFullscreen()?i.FULLSCREEN:i.NORMAL;e.resizeAd(r.width,r.height,a,g)}function g(t){if(t){p.error("ERROR: "+t.message,t)}}e.exports=h},{"../../utils/async":30,"../../utils/consoleLogger":31,"../../utils/dom":32,"../../utils/mimetypes":34,"../../utils/playerUtils":35,"../../utils/utilityFunctions":37,"../vast/VASTError":14,"../vast/VASTResponse":16,"../vast/VASTTracker":17,"../vast/vastUtil":21,"./VPAIDAdUnitWrapper":22}],25:[function(t,e,i){"use strict";var n=t("../../utils/dom");var r=document.createElement("div");r.className="vjs-ads-label vjs-control vjs-label-hidden";r.innerHTML="Advertisement";var a=function(t){return{init:function e(i,a){a.el=r;t.call(this,i,a);setTimeout(function(){var t=i.controlBar&&(i.controlBar.getChild("timerControls")||i.controlBar.getChild("currentTimeDisplay"));if(t){i.controlBar.el().insertBefore(r,t.el())}n.removeClass(r,"vjs-label-hidden")},0)},el:function i(){return r}}};e.exports=a},{"../../utils/dom":32}],26:[function(t,e,i){"use strict";var n=videojs.getComponent("Component");var r=t("./ads-label")(n);videojs.registerComponent("AdsLabel",videojs.extend(n,r))},{"./ads-label":25}],27:[function(t,e,i){"use strict";var n=document.createElement("div");var r=function(t){return{init:function e(i,r){r.el=n;n.className="vjs-black-poster";t.call(this,i,r);var a=i.getChild("posterImage");setTimeout(function(){if(a&&i&&i.el()){i.el().insertBefore(n,a.el())}},0)},el:function i(){return n}}};e.exports=r},{}],28:[function(t,e,i){"use strict";var n=videojs.getComponent("Component");var r=t("./black-poster")(n);videojs.registerComponent("BlackPoster",videojs.extend(n,r))},{"./black-poster":27}],29:[function(t,e,i){"use strict";var n=t("../ads/vast/VASTClient");var r=t("../ads/vast/VASTError");var a=t("../ads/vast/vastUtil");var o=t("../ads/vast/VASTIntegrator");var s=t("../ads/vpaid/VPAIDIntegrator");var u=t("../utils/async");var c=t("../utils/dom");var l=t("../utils/playerUtils");var d=t("../utils/utilityFunctions");var f=t("../utils/consoleLogger");e.exports=function p(t){var e;var i=this;var p=new n;var h=false;var v={timeout:500,iosPrerollCancelTimeout:2e3,adCancelTimeout:3e3,playAdAlways:false,adsEnabled:true,autoResize:true,verbosity:0};var g=d.extend({},v,t||{});if(d.isUndefined(g.adTagUrl)&&d.isDefined(g.url)){g.adTagUrl=g.url}if(d.isString(g.adTagUrl)){g.adTagUrl=d.echoFn(g.adTagUrl)}if(d.isDefined(g.adTagXML)&&!d.isFunction(g.adTagXML)){return k(new r("on VideoJS VAST plugin, the passed adTagXML option does not contain a function"))}if(!d.isDefined(g.adTagUrl)&&!d.isFunction(g.adTagXML)){return k(new r("on VideoJS VAST plugin, missing adTagUrl on options object"))}f.setVerbosity(g.verbosity);l.prepareForAds(i);if(g.playAdAlways){i.on("vast.contentEnd",function(){setTimeout(function(){i.trigger("vast.reset")},0)})}i.on("vast.firstPlay",m);i.on("vast.reset",function(){e=null;y()});i.vast={isEnabled:function(){return g.adsEnabled},enable:function(){g.adsEnabled=true},disable:function(){g.adsEnabled=false}};return i.vast;function m(){l.removeNativePoster(i);l.once(i,["vast.adsCancel","vast.adEnd"],function(){t();n()});u.waterfall([o,s,p,A],function(t,e){if(t){k(t,e)}else{i.trigger("vast.adEnd")}});function t(){if(i.vast&&i.vast.adUnit){i.vast.adUnit=null}}function n(){a();if(e){l.restorePlayerSnapshot(i,e);e=null}}function a(){l.once(i,["playing","vast.reset","vast.firstPlay"],function(t){if(t.type!=="playing"){return}i.trigger("vast.contentStart");l.once(i,["ended","vast.reset","vast.firstPlay"],function(t){if(t.type==="ended"){i.trigger("vast.contentEnd")}})})}function o(t){if(g.adsEnabled){return t(null)}t(new r("Ads are not enabled"))}function s(t){if(f()){e=l.getPlayerSnapshot(i);i.pause();v();if(i.paused()){t(null)}else{l.once(i,["playing"],function(){i.pause();t(null)})}}else{t(new r("video content has been playing before preroll ad"))}}function f(){return!d.isIPhone()||i.currentTime()<=g.iosPrerollCancelTimeout}function p(t){var e;h=false;e=setTimeout(function(){k(new r("timeout while waiting for the video to start playing",402))},g.adCancelTimeout);l.once(i,["vast.adStart","vast.adsCancel"],n);function n(){if(e){clearTimeout(e);e=null}}t(null)}function v(){c.addClass(i.el(),"vjs-vast-ad-loading");l.once(i,["vast.adStart","vast.adsCancel"],m)}function m(){setTimeout(function(){c.removeClass(i.el(),"vjs-vast-ad-loading")},100)}}function y(){i.trigger("vast.adsCancel");h=true}function A(t){u.waterfall([T,E],t)}function T(t){p.getVASTResponse(g.adTagUrl?g.adTagUrl():g.adTagXML,t)}function E(t,e){if(h){return}var n=w(t)?new s(i,g):new o(i);var r=false;l.once(i,["vast.adStart","vast.adsCancel"],function(t){if(t.type==="vast.adStart"){a()}});l.once(i,["vast.adEnd","vast.adsCancel"],u);if(d.isIDevice()){c()}i.vast.vastResponse=t;f.debug("calling adIntegrator.playAd() with vastResponse:",t);i.vast.adUnit=n.playAd(t,e);function a(){if(r||i.controlBar.getChild("AdsLabel")){return}i.controlBar.addChild("AdsLabel")}function u(){i.controlBar.removeChild("AdsLabel");r=true}function c(){var t=3;var e=0;var n=0;i.on("timeupdate",a);i.on("ended",r);l.once(i,["vast.adEnd","vast.adsCancel","vast.adError"],o);function r(){if(i.duration()-e>t){i.pause(true);i.play(true);i.currentTime(e)}}function a(){var r=i.currentTime();var a=Math.abs(r-e);if(a>t){n+=1;if(n>=2){i.pause(true)}i.currentTime(e)}else{e=r}}function o(){i.off("timeupdate",a);i.off("ended",r)}}}function k(t,e){i.trigger({type:"vast.adError",error:t});y();f.error("AD ERROR:",t.message,t,e)}function w(t){var e,i;var n=t.mediaFiles;for(e=0,i=n.length;e<i;e++){if(a.isVPAID(n[e])){return true}}return false}}},{"../ads/vast/VASTClient":13,"../ads/vast/VASTError":14,"../ads/vast/VASTIntegrator":15,"../ads/vast/vastUtil":21,"../ads/vpaid/VPAIDIntegrator":24,"../utils/async":30,"../utils/consoleLogger":31,"../utils/dom":32,"../utils/playerUtils":35,"../utils/utilityFunctions":37}],30:[function(t,e,i){var n=t("./utilityFunctions");var r={};r.setImmediate=function(t){setTimeout(t,0)};r.iterator=function(t){var e=function(i){var n=function(){if(t.length){t[i].apply(null,arguments)}return n.next()};n.next=function(){return i<t.length-1?e(i+1):null};return n};return e(0)};r.waterfall=function(t,e){e=e||function(){};if(!n.isArray(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length){return e()}var a=function(t){return function(i){if(i){e.apply(null,arguments);e=function(){}}else{var n=Array.prototype.slice.call(arguments,1);var o=t.next();if(o){n.push(a(o))}else{n.push(e)}r.setImmediate(function(){t.apply(null,n)})}}};a(r.iterator(t))()};r.when=function(t,e){if(!n.isFunction(e)){throw new Error("async.when error: missing callback argument")}var i=n.isFunction(t)?t:function(){return!!t};return function(){var t=n.arrayLikeObjToArray(arguments);var r=t.pop();if(i.apply(null,t)){return e.apply(this,arguments)}t.unshift(null);return r.apply(null,t)}};e.exports=r},{"./utilityFunctions":37}],31:[function(t,e,i){"use strict";var n=0;var r="[videojs-vast-vpaid] ";function a(t){n=t}function o(t,e){if(e.length>0&&typeof e[0]==="string"){e[0]=r+e[0]}if(t.apply){t.apply(console,Array.prototype.slice.call(e))}else{t(Array.prototype.slice.call(e))}}function s(){if(n<4){return}if(typeof console.debug==="undefined"){o(console.log,arguments)}else{o(console.debug,arguments)}}function u(){if(n<3){return}o(console.log,arguments)}function c(){if(n<2){return}o(console.info,arguments)}function l(){if(n<1){return}o(console.warn,arguments)}function d(){o(console.error,arguments)}var f={setVerbosity:a,debug:s,log:u,info:c,warn:l,error:d};if(typeof console==="undefined"||!console.log){f.debug=function(){};f.log=function(){};f.info=function(){};f.warn=function(){};f.error=function(){}}e.exports=f},{}],32:[function(t,e,i){"use strict";var n=t("./utilityFunctions");var r={};r.isVisible=function a(t){var e=window.getComputedStyle(t);return e.visibility!=="hidden"};r.isHidden=function o(t){var e=window.getComputedStyle(t);return e.display==="none"};r.isShown=function s(t){return!r.isHidden(t)};r.hide=function u(t){t.__prev_style_display_=t.style.display;t.style.display="none"};r.show=function c(t){if(r.isHidden(t)){t.style.display=t.__prev_style_display_}t.__prev_style_display_=undefined};r.hasClass=function l(t,e){var i,r,a;if(n.isNotEmptyString(e)){if(t.classList){return t.classList.contains(e)}i=n.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];e=e||"";for(r=0,a=i.length;r<a;r+=1){if(i[r]===e){return true}}}return false};r.addClass=function(t,e){var i;if(n.isNotEmptyString(e)){if(t.classList){return t.classList.add(e)}i=n.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];if(n.isString(e)&&n.isNotEmptyString(e.replace(/\s+/,""))){i.push(e);t.setAttribute("class",i.join(" "))}}};r.removeClass=function(t,e){var i;if(n.isNotEmptyString(e)){if(t.classList){return t.classList.remove(e)}i=n.isString(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[];var r=[];var a,o;if(n.isString(e)&&n.isNotEmptyString(e.replace(/\s+/,""))){for(a=0,o=i.length;a<o;a+=1){if(e!==i[a]){r.push(i[a])}}t.setAttribute("class",r.join(" "))}}};r.addEventListener=function d(t,e,i){if(n.isArray(t)){n.forEach(t,function(t){r.addEventListener(t,e,i)});return}if(n.isArray(e)){n.forEach(e,function(e){r.addEventListener(t,e,i)});return}if(t.addEventListener){t.addEventListener(e,i,false)}else if(t.attachEvent){t.attachEvent("on"+e,i)}};r.removeEventListener=function f(t,e,i){if(n.isArray(t)){n.forEach(t,function(t){r.removeEventListener(t,e,i)});return}if(n.isArray(e)){n.forEach(e,function(e){r.removeEventListener(t,e,i)});return}if(t.removeEventListener){t.removeEventListener(e,i,false)}else if(t.detachEvent){t.detachEvent("on"+e,i)}else{t["on"+e]=null}};r.dispatchEvent=function p(t,e){if(t.dispatchEvent){t.dispatchEvent(e)}else{t.fireEvent("on"+e.eventType,e)}};r.isDescendant=function h(t,e){var i=e.parentNode;while(i!==null){if(i===t){return true}i=i.parentNode}return false};r.getTextContent=function v(t){return t.textContent||t.text};r.prependChild=function g(t,e){if(e.parentNode){e.parentNode.removeChild(e)}return t.insertBefore(e,t.firstChild)};r.remove=function m(t){if(t&&t.parentNode){t.parentNode.removeChild(t)}};r.isDomElement=function y(t){return t instanceof Element};r.click=function(t,e){r.addEventListener(t,"click",e)};r.once=function(t,e,i){function n(){i.apply(null,arguments);r.removeEventListener(t,e,n)}r.addEventListener(t,e,n)};r.getDimension=function A(t){var e;if(!n.isOldIE()&&t.getBoundingClientRect){e=t.getBoundingClientRect();return{width:e.width,height:e.height}}return{width:t.offsetWidth,height:t.offsetHeight}};e.exports=r},{"./utilityFunctions":37}],33:[function(t,e,i){"use strict";var n=t("./urlUtils");var r=t("./utilityFunctions");function a(t){this.message="HttpRequest Error: "+(t||"")}a.prototype=new Error;a.prototype.name="HttpRequest Error";function o(t){if(!r.isFunction(t)){throw new a("Missing XMLHttpRequest factory method")}this.createXhr=t}o.prototype.run=function(t,e,i,o){l(e,i,o);var s,u;var c=this.createXhr();o=o||{};s=r.isNumber(o.timeout)?o.timeout:0;c.open(t,n.urlParts(e).href,true);if(o.headers){d(c,o.headers)}if(o.withCredentials){c.withCredentials=true}c.onload=function(){var t,e,n;if(!c.getAllResponseHeaders){c.getAllResponseHeaders=function(){return null}}if(!c.status){c.status=200}if(r.isDefined(u)){clearTimeout(u);u=undefined}t=c.statusText||"";e="response"in c?c.response:c.responseText;n=c.status===1223?204:c.status;i(n,e,c.getAllResponseHeaders(),t)};c.onerror=f;c.onabort=f;c.send();if(s>0){u=setTimeout(function(){c&&c.abort()},s)}function l(t,e,i){if(!r.isString(t)||r.isEmptyString(t)){throw new a("Invalid url '"+t+"'")}if(!r.isFunction(e)){throw new a("Invalid handler '"+e+"' for the http request")}if(r.isDefined(i)&&!r.isObject(i)){throw new a("Invalid options map '"+i+"'")}}function d(t,e){r.forEach(e,function(e,i){if(r.isDefined(e)){t.setRequestHeader(i,e)}})}function f(){i(-1,null,null,"")}};o.prototype.get=function(t,e,i){this.run("GET",t,n,i);function n(t,i,n,o){if(r(t)){e(null,i,t,n,o)}else{e(new a(o),i,t,n,o)}}function r(t){return 200<=t&&t<300}};function s(){var t=new XMLHttpRequest;if(!("withCredentials"in t)){t=new XDomainRequest}return t}var u=new o(s);e.exports={http:u,HttpRequest:o,HttpRequestError:a,createXhr:s}},{"./urlUtils":36,"./utilityFunctions":37}],34:[function(t,e,i){"use strict";e.exports={html5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],flash:["application/x-shockwave-flash"]}},{}],35:[function(t,e,i){"use strict";var n=t("./dom");var r=t("./utilityFunctions");var a={};a.getPlayerSnapshot=function o(t){var e=t.el().querySelector(".vjs-tech");var i={ended:t.ended(),src:t.currentSrc(),currentTime:t.currentTime(),type:t.currentType(),playing:!t.paused(),suppressedTracks:n(t)};if(e){i.nativePoster=e.poster;i.style=e.getAttribute("style")}return i;function n(t){var e=t.remoteTextTracks?t.remoteTextTracks():[];if(e&&r.isArray(e.tracks_)){e=e.tracks_}if(!r.isArray(e)){e=[]}var i=[];e.forEach(function(t){i.push({track:t,mode:t.mode});t.mode="disabled"});return i}};a.restorePlayerSnapshot=function s(t,e){var i=t.el().querySelector(".vjs-tech");var n=20;if(e.nativePoster){i.poster=e.nativePoster}if("style"in e){i.setAttribute("style",e.style||"")}if(o(t,e)){t.one("contentloadedmetadata",s);t.one("canplay",u);r();t.src({src:e.src,type:e.type});t.load()}else{s();if(e.playing){t.play()}}function r(){var e=setTimeout(function(){t.trigger("canplay")},1e3);t.one("canplay",function(){clearTimeout(e)})}function o(t,e){if(t.src()){return t.src()!==e.src}return t.currentSrc()!==e.src}function s(){var t=e.suppressedTracks;t.forEach(function(t){t.track.mode=t.mode})}function u(){if(!a.isReadyToResume(t)&&n--){setTimeout(u,50)}else{try{if(t.currentTime()!==e.currentTime){if(e.playing){t.one("seeked",function(){
t.play()})}t.currentTime(e.currentTime)}else if(e.playing){t.play()}}catch(i){videojs.log.warn("Failed to resume the content after an advertisement",i)}}}};a.isReadyToResume=function(t){if(t.readyState()>1){return true}if(t.seekable()===undefined){return true}if(t.seekable().length>0){return true}return false};a.prepareForAds=function(t){var e=t.addChild("blackPoster");var i=true;var a;o();t.on("play",u);t.on("vast.reset",c);t.on("vast.firstPlay",f);t.on("error",h);t.on("vast.adStart",h);t.on("vast.adsCancel",h);t.on("vast.adError",h);t.on("vast.adStart",v);t.on("vast.adEnd",g);t.on("vast.adsCancel",g);function o(){var e=t.play;t.play=function(i){var n=this;if(l()){o()}else{u(i)}return this;function o(){if(!r.isIPhone()){a=d();t.muted(true)}e.apply(n,arguments)}function u(i){if(s()&&!i){t.vast.adUnit.resumeAd()}else{e.apply(n,arguments)}}};var i=t.pause;t.pause=function(e){if(s()&&!e){t.vast.adUnit.pauseAd()}else{i.apply(this,arguments)}return this};var n=t.paused;t.paused=function(e){if(s()&&!e){return t.vast.adUnit.isPaused()}return n.apply(this,arguments)}}function s(){return t.vast&&t.vast.adUnit}function u(){if(l()){i=false;t.trigger("vast.firstPlay")}}function c(){i=true;e.show();f()}function l(){return i}function d(){return{muted:t.muted(),volume:t.volume()}}function f(){if(a){t.currentTime(0);p(a);a=null}}function p(e){if(r.isObject(e)){t.volume(e.volume);t.muted(e.muted)}}function h(){if(!n.hasClass(e.el(),"vjs-hidden")){e.hide()}}function v(){n.addClass(t.el(),"vjs-ad-playing")}function g(){n.removeClass(t.el(),"vjs-ad-playing")}};a.removeNativePoster=function(t){var e=t.el().querySelector(".vjs-tech");if(e){e.removeAttribute("poster")}};a.once=function u(t,e,i){function n(){i.apply(null,arguments);e.forEach(function(e){t.off(e,n)})}e.forEach(function(e){t.on(e,n)})};e.exports=a},{"./dom":32,"./utilityFunctions":37}],36:[function(t,e,i){"use strict";var n=t("./utilityFunctions");var r=document.createElement("a");var a=document.documentMode;function o(t){var e=t;if(a){r.setAttribute("href",e);e=r.href}r.setAttribute("href",e);return{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:n.isNotEmptyString(r.port)?r.port:80,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}function s(t,e){var i,r;e=n.isFunction(e)?e:function(){return true};t=t.trim().replace(/^\?/,"");i=t.split("&");r={};n.forEach(i,function(t){var i,n,a;if(t!==""){i=t.split("=");n=i[0];a=i[1];if(e(n,a)){r[n]=a}}});return r}function u(t){var e=[];n.forEach(t,function(t,i){e.push(i+"="+t)});return e.join("&")}e.exports={urlParts:o,queryStringToObj:s,objToQueryString:u}},{"./utilityFunctions":37}],37:[function(t,e,i){"use strict";var n=1;var r=/[A-Z]/g;var a=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i;var o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function s(){}function u(t){return t===null}function c(t){return t!==undefined}function l(t){return t===undefined}function d(t){return typeof t==="object"}function f(t){return typeof t==="function"}function p(t){return typeof t==="number"}function h(t){return j.isObject(t)&&t.window===t}function v(t){return Object.prototype.toString.call(t)==="[object Array]"}function g(t){if(t===null||j.isWindow(t)||j.isFunction(t)||j.isUndefined(t)){return false}var e=t.length;if(t.nodeType===n&&e){return true}return j.isString(t)||j.isArray(t)||e===0||typeof e==="number"&&e>0&&e-1 in t}function m(t){return typeof t==="string"}function y(t){return j.isString(t)&&t.length===0}function A(t){return j.isString(t)&&t.length!==0}function T(t){return Array.prototype.slice.call(t)}function E(t,e,i){var n,r;if(t){if(f(t)){for(n in t){if(n!=="prototype"&&n!=="length"&&n!=="name"&&(!t.hasOwnProperty||t.hasOwnProperty(n))){e.call(i,t[n],n,t)}}}else if(v(t)){var a=typeof t!=="object";for(n=0,r=t.length;n<r;n++){if(a||n in t){e.call(i,t[n],n,t)}}}else if(t.forEach&&t.forEach!==E){t.forEach(e,i,t)}else{for(n in t){if(t.hasOwnProperty(n)){e.call(i,t[n],n,t)}}}}return t}function k(t,e){e=e||"_";return t.replace(r,function(t,i){return(i?e:"")+t.toLowerCase()})}function w(t){if(!j.isString(t)){return false}return a.test(t.trim())}function S(t){var e,i,n;for(i=1;i<arguments.length;i++){e=arguments[i];for(n in e){if(e.hasOwnProperty(n)){if(d(t[n])&&!u(t[n])&&d(e[n])){t[n]=S({},t[n],e[n])}else{t[n]=e[n]}}}}return t}function b(t){return t.charAt(0).toUpperCase()+t.slice(1)}function V(t){return t.charAt(0).toLowerCase()+t.slice(1)}function _(t,e){var i=[];t.forEach(function(t,n){var r=e(t,n);if(j.isDefined(r)){i.push(r)}});return i}function C(t,e){var i=t+"";e=j.isNumber(e)?e:0;t=j.isNumber(t)?t:parseInt(t,10);if(j.isNumber(t)&&!isNaN(t)){i=t+"";while(i.length<e){i="0"+i}return i}return NaN+""}function I(t,e){var i=(new Date).getTime()-(e+1);return function(){var n=(new Date).getTime();if(n-i>=e){i=n;t.apply(this,arguments)}}}function L(t,e){var i;return function(){if(i){clearTimeout(i)}i=setTimeout(function(){t.apply(this,arguments);i=undefined},e)}}function U(t,e,i){var n=e(t);for(var r=0;r<n.length;r++){if(i(n[r])){return n[r]}else{var a=U(n[r],e,i);if(a){return a}}}}function x(t){return function(){return t}}function D(t){if(j.isNumber(t)){t=t+""}if(!j.isString(t)){return false}return o.test(t.trim())}function F(){var t=j.getInternetExplorerVersion(navigator);if(t===-1){return false}return t<10}function P(t){var e=-1;if(t.appName=="Microsoft Internet Explorer"){var i=t.userAgent;var n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");var r=n.exec(i);if(r!==null){e=parseFloat(r[1])}}return e}function R(){return/iP(hone|ad)/.test(j._UA)}function M(){return/iP(hone|ad|od)|Android|Windows Phone/.test(j._UA)}function N(){return/iP(hone|od)/.test(j._UA)}function O(){return/Android/.test(j._UA)}var j={_UA:navigator.userAgent,noop:s,isNull:u,isDefined:c,isUndefined:l,isObject:d,isFunction:f,isNumber:p,isWindow:h,isArray:v,isArrayLike:g,isString:m,isEmptyString:y,isNotEmptyString:A,arrayLikeObjToArray:T,forEach:E,snake_case:k,isValidEmail:w,extend:S,capitalize:b,decapitalize:V,transformArray:_,toFixedDigits:C,throttle:I,debounce:L,treeSearch:U,echoFn:x,isISO8601:D,isOldIE:F,getInternetExplorerVersion:P,isIDevice:R,isMobile:M,isIPhone:N,isAndroid:O};e.exports=j},{}],38:[function(t,e,i){"use strict";var n=t("./utilityFunctions");var r={};r.strToXMLDoc=function a(t){if(typeof window.DOMParser==="undefined"){var e=new ActiveXObject("Microsoft.XMLDOM");e.async=false;e.loadXML(t);return e}return i(t);function i(t){var e=new DOMParser;var i;try{i=e.parseFromString(t,"application/xml");if(r(i)||n.isEmptyString(t)){throw new Error}}catch(a){throw new Error("xml.strToXMLDOC: Error parsing the string: '"+t+"'")}return i}function r(t){try{var e=new DOMParser,i=e.parseFromString("INVALID","text/xml"),n=i.getElementsByTagName("parsererror")[0].namespaceURI;if(n==="http://www.w3.org/1999/xhtml"){return t.getElementsByTagName("parsererror").length>0}return t.getElementsByTagNameNS(n,"parsererror").length>0}catch(r){}}};r.parseText=function o(t){if(/^\s*$/.test(t)){return null}if(/^(?:true|false)$/i.test(t)){return t.toLowerCase()==="true"}if(isFinite(t)){return parseFloat(t)}if(n.isISO8601(t)){return new Date(t)}return t.trim()};r.JXONTree=function s(t){var e=r.parseText;if(t.documentElement){return new r.JXONTree(t.documentElement)}if(t.hasChildNodes()){var i="";for(var a,o,s,u=0;u<t.childNodes.length;u++){a=t.childNodes.item(u);if((a.nodeType-1|1)===3){i+=a.nodeType===3?a.nodeValue.trim():a.nodeValue}else if(a.nodeType===1&&!a.prefix){o=n.decapitalize(a.nodeName);s=new r.JXONTree(a);if(this.hasOwnProperty(o)){if(this[o].constructor!==Array){this[o]=[this[o]]}this[o].push(s)}else{this[o]=s}}}if(i){this.keyValue=e(i)}}var c=typeof t.hasAttributes==="undefined"?t.attributes.length>0:t.hasAttributes();if(c){var l;for(var d=0;d<t.attributes.length;d++){l=t.attributes.item(d);this["@"+n.decapitalize(l.name)]=e(l.value.trim())}}};r.JXONTree.prototype.attr=function(t){return this["@"+n.decapitalize(t)]};r.toJXONTree=function u(t){var e=r.strToXMLDoc(t);return new r.JXONTree(e)};r.keyValue=function c(t){if(t){return t.keyValue}return undefined};r.attr=function l(t,e){if(t){return t["@"+n.decapitalize(e)]}return undefined};r.encode=function d(t){if(!n.isString(t))return undefined;return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};r.decode=function f(t){if(!n.isString(t))return undefined;return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};e.exports=r},{"./utilityFunctions":37}],39:[function(t,e,i){"use strict";t("./plugin/components/ads-label_5");t("./plugin/components/black-poster_5");var n=t("./plugin/videojs.vast.vpaid");videojs.registerPlugin("vastClient",n)},{"./plugin/components/ads-label_5":26,"./plugin/components/black-poster_5":28,"./plugin/videojs.vast.vpaid":29}]},{},[39]);
//# sourceMappingURL=videojs_6.vast.vpaid.min.js.map
